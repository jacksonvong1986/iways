webpackJsonp([2],{"0CwL":function(e,t,a){var s={"./af":"BDq7","./af.js":"BDq7","./ar":"5+h0","./ar-dz":"qUB5","./ar-dz.js":"qUB5","./ar-kw":"iOhK","./ar-kw.js":"iOhK","./ar-ly":"+qXE","./ar-ly.js":"+qXE","./ar-ma":"9CSN","./ar-ma.js":"9CSN","./ar-sa":"18kz","./ar-sa.js":"18kz","./ar-tn":"kPAx","./ar-tn.js":"kPAx","./ar.js":"5+h0","./az":"gGYd","./az.js":"gGYd","./be":"bwxU","./be.js":"bwxU","./bg":"JGhJ","./bg.js":"JGhJ","./bm":"Xru4","./bm.js":"Xru4","./bn":"7kNY","./bn.js":"7kNY","./bo":"PoV8","./bo.js":"PoV8","./br":"pKqw","./br.js":"pKqw","./bs":"/TJY","./bs.js":"/TJY","./ca":"YSL1","./ca.js":"YSL1","./cs":"6rWx","./cs.js":"6rWx","./cv":"uEOG","./cv.js":"uEOG","./cy":"HMVL","./cy.js":"HMVL","./da":"eJcm","./da.js":"eJcm","./de":"76Xd","./de-at":"wguz","./de-at.js":"wguz","./de-ch":"t9sU","./de-ch.js":"t9sU","./de.js":"76Xd","./dv":"qpG3","./dv.js":"qpG3","./el":"RU5T","./el.js":"RU5T","./en-au":"xkql","./en-au.js":"xkql","./en-ca":"LaAa","./en-ca.js":"LaAa","./en-gb":"q9zR","./en-gb.js":"q9zR","./en-ie":"wQFa","./en-ie.js":"wQFa","./en-il":"UOkQ","./en-il.js":"UOkQ","./en-nz":"tdgP","./en-nz.js":"tdgP","./eo":"+psB","./eo.js":"+psB","./es":"X8i8","./es-do":"Do8U","./es-do.js":"Do8U","./es-us":"0nXy","./es-us.js":"0nXy","./es.js":"X8i8","./et":"dguy","./et.js":"dguy","./eu":"3rUw","./eu.js":"3rUw","./fa":"V5p0","./fa.js":"V5p0","./fi":"7ewy","./fi.js":"7ewy","./fo":"VdSW","./fo.js":"VdSW","./fr":"lcbB","./fr-ca":"w6ES","./fr-ca.js":"w6ES","./fr-ch":"lp7T","./fr-ch.js":"lp7T","./fr.js":"lcbB","./fy":"PB+s","./fy.js":"PB+s","./gd":"4eWq","./gd.js":"4eWq","./gl":"6eiy","./gl.js":"6eiy","./gom-latn":"PoEu","./gom-latn.js":"PoEu","./gu":"52jv","./gu.js":"52jv","./he":"aGFt","./he.js":"aGFt","./hi":"ovgQ","./hi.js":"ovgQ","./hr":"sR8V","./hr.js":"sR8V","./hu":"jIBy","./hu.js":"jIBy","./hy-am":"rl7R","./hy-am.js":"rl7R","./id":"l+BE","./id.js":"l+BE","./is":"AcWJ","./is.js":"AcWJ","./it":"hMys","./it.js":"hMys","./ja":"rxB3","./ja.js":"rxB3","./jv":"8JrF","./jv.js":"8JrF","./ka":"Du88","./ka.js":"Du88","./kk":"ed4t","./kk.js":"ed4t","./km":"3MAz","./km.js":"3MAz","./kn":"NnY8","./kn.js":"NnY8","./ko":"9GQR","./ko.js":"9GQR","./ky":"82U/","./ky.js":"82U/","./lb":"4TvZ","./lb.js":"4TvZ","./lo":"kWxv","./lo.js":"kWxv","./lt":"hPoR","./lt.js":"hPoR","./lv":"VA5M","./lv.js":"VA5M","./me":"8KEV","./me.js":"8KEV","./mi":"sKWT","./mi.js":"sKWT","./mk":"8pEt","./mk.js":"8pEt","./ml":"Z9vE","./ml.js":"Z9vE","./mr":"y6v4","./mr.js":"y6v4","./ms":"5s/w","./ms-my":"4gdy","./ms-my.js":"4gdy","./ms.js":"5s/w","./mt":"/mn1","./mt.js":"/mn1","./my":"fpJ9","./my.js":"fpJ9","./nb":"Wc3u","./nb.js":"Wc3u","./ne":"h1XZ","./ne.js":"h1XZ","./nl":"hLQP","./nl-be":"Z2qm","./nl-be.js":"Z2qm","./nl.js":"hLQP","./nn":"6jUg","./nn.js":"6jUg","./pa-in":"WBhe","./pa-in.js":"WBhe","./pl":"tZSx","./pl.js":"tZSx","./pt":"OHwL","./pt-br":"A7w8","./pt-br.js":"A7w8","./pt.js":"OHwL","./ro":"uDQF","./ro.js":"uDQF","./ru":"kiL4","./ru.js":"kiL4","./sd":"/ctn","./sd.js":"/ctn","./se":"xTiq","./se.js":"xTiq","./si":"8uoX","./si.js":"8uoX","./sk":"/IH8","./sk.js":"/IH8","./sl":"eAL5","./sl.js":"eAL5","./sq":"+hX9","./sq.js":"+hX9","./sr":"VbzY","./sr-cyrl":"Fiaj","./sr-cyrl.js":"Fiaj","./sr.js":"VbzY","./ss":"q+uN","./ss.js":"q+uN","./sv":"3atA","./sv.js":"3atA","./sw":"CYjM","./sw.js":"CYjM","./ta":"HYkj","./ta.js":"HYkj","./te":"DPeS","./te.js":"DPeS","./tet":"owx7","./tet.js":"owx7","./tg":"vbyA","./tg.js":"vbyA","./th":"euk6","./th.js":"euk6","./tl-ph":"Pan4","./tl-ph.js":"Pan4","./tlh":"4KRO","./tlh.js":"4KRO","./tr":"D44C","./tr.js":"D44C","./tzl":"WDKa","./tzl.js":"WDKa","./tzm":"nrHS","./tzm-latn":"nBIm","./tzm-latn.js":"nBIm","./tzm.js":"nrHS","./ug-cn":"apxY","./ug-cn.js":"apxY","./uk":"zFgi","./uk.js":"zFgi","./ur":"RzSa","./ur.js":"RzSa","./uz":"vFmK","./uz-latn":"LVAz","./uz-latn.js":"LVAz","./uz.js":"vFmK","./vi":"oIIj","./vi.js":"oIIj","./x-pseudo":"8zQP","./x-pseudo.js":"8zQP","./yo":"tjlS","./yo.js":"tjlS","./zh-cn":"at/I","./zh-cn.js":"at/I","./zh-hk":"7xHM","./zh-hk.js":"7xHM","./zh-tw":"v/sX","./zh-tw.js":"v/sX"};function l(e){return a(r(e))}function r(e){var t=s[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}l.keys=function(){return Object.keys(s)},l.resolve=r,e.exports=l,l.id="0CwL"},"1v1R":function(e,t){},"4hQg":function(e,t){},"4wE5":function(e,t){},"6Xst":function(e,t){},APar:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("MVMM"),l=a("zO6J"),r=a("4YfN"),n=a.n(r),i=a("9rMa"),o=a("M8t8"),u=a("aA9S"),c=a.n(u),d=a("pkma"),p=a.n(d),m={data:function(){return{token:this.$store.state.admin.token,admin_id:this.$store.state.admin.user_id,menus:this.$store.state.admin.menus,menus_table:this.$helper.arr2table(this.$store.state.admin.menus),spm:this.$route.query.spm?this.$route.query.spm.split("-").slice(0,3).join("-"):"",status:{0:"已禁用",1:"使用中"},failTimes:3}},computed:{privileges:function(){var e=[];return this.$helper.arr2table(this.menus_table).map(function(t){if(t.url){if("#"==t.url)return;if(e.includes(t.url))return;e.push(t.url)}}),e}},filters:{number_format:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",";if(e&&""!=e&&!isNaN(e)||(e=0),-1===e)return"暂无数据";if(e=e.toFixed(t),""!=a){e=(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&"+a)}return e},date_format:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY/MM/DD";return e?p()(e).format(t):e}},methods:n()({},Object(i.b)([o.b]),{clearValidate:function(e){this.$refs[e]&&this.$refs[e].clearValidate()},dataUpdate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.update||(e.checked_ids||[]).map(function(e){return Number(e)}).join(","),s=t.field,l=t.action,r=t.value,n=t.cb||this.getList,i=c()({},{field:s,value:r,id:a},{user_id:this.user_id,token:this.token});if(a.length<1)return this.$message({type:"error",message:"请选择需要操作的数据！"});this.$confirm("确定要操作这些数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$request.post(l,i,function(t){e.$message({type:"success",message:t.msg||"",onClose:function(){n()}})})},function(){})},getToken:function(e){this.token?"function"==typeof e&&e():this.$router.push({path:"/login"})},failure:function(e){var t=this;switch(e.code||e.result_msg){case"Bad Request: Token is invalid":case"ACCESS_TOKEN_FAILD":this.$request.get(this.$interface.REFRESH,{refresh_token:this.$store.state.admin.refresh_token},function(e){t.ADMIN_REFRESH_TOKEN(e.data.token),t.$router.go(0)},this.failure);break;case"REFRESH_TOKEN_EXPIRED":this.$router.push({path:"/login"});break;case"NO_PERMISSION":this.$router.go(-1);break;default:this.$notify.error({title:"错误信息",message:"[code:"+(e.result_code||e.code||"400")+"]"+(e.result_msg||e.msg||"数据有误")})}},ucfirst:function(e){return e=(e=e.toLowerCase()).replace(/\b\w+\b/g,function(e){return e.substring(0,1).toUpperCase()+e.substring(1)})}}),created:function(){}},_={name:"admin",mixins:[m],data:function(){return{username:this.$store.state.admin.username,role_name:this.$store.state.admin.roles[0]?this.$store.state.admin.roles[0].role_name:"暂无角色",dialogVisible:!1,region:"",active_menu_key:this.$route.query.spm?this.$route.query.spm.split("-").slice(0,2).join("-"):"",opened_submenu_key:[],active_submenu_key:""}},watch:{$route:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0}},mounted:function(){var e=this;this.getToken(function(){e.onhashchange()})},methods:n()({},Object(i.b)([o.d]),{topHandleSelect:function(e,t){var a=this;this.active_menu_key=e,this.opened_submenu_key=this.menus.map(function(t){if(t&&"m-"+t.id==e&&t.sub){var s="m-"+t.id,l=s+"-"+t.sub[0].id;if(t.sub[0]&&t.sub[0].sub){var r=t.sub[0].sub[0];a.active_submenu_key=s+"-"+r.id,a.$router.push({path:r.url,query:{spm:a.active_submenu_key}})}else a.active_submenu_key=s+"-"+t.sub[0].id,a.$router.push({path:t.sub[0].url,query:{spm:a.active_submenu_key}});return l}}).filter(function(e){return void 0!=e})},leftHandleSelect:function(e,t){},onhashchange:function(){var e=this.$route.path.substr(1),t=this.spm;if(/^m\-[\d\-]+$/.test(t)||(t=this.$helper.menu.getNode(this.menus_table,this.$helper.menu.getUri())||""),e.length<1||t.length<1){var a,s=this.menus_table.find(function(e,t,a){return""!=e.url&&"#"!=e.url}),l=s.url||"index/main";t=[(a=(t=s.path?"m"+s.path:"").split("-"))[0],a[1],a[a.length-1]].join("-"),this.$router.push({path:l,query:{spm:t}})}t=[(a=t.split("-"))[0],a[1],a[a.length-1]].join("-");var r=[a[0],a[1]].join("-");this.active_menu_key=r,this.active_submenu_key=t},logout:function(){var e=this;this.$confirm("是否退出登录","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$request.get(e.$interface.CHECK_LOGOUT,{token:e.token},function(t){e.ADMIN_SIGNOUT(),e.$router.push({path:"/login"})})}).catch(function(){})}}),components:{}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-aside",{staticClass:"aside",attrs:{width:"200px"}},[a("div",{staticClass:"aside-logo"},[a("span",[e._v("我司管理系统")])]),e._v(" "),a("div",{staticClass:"aside-info"},[a("div",{style:{display:"/index/main"!==e.$route.path?"block":"none"}},e._l(e.menus,function(t){return a("el-menu",{key:t.id,staticClass:"el-menu-vertical-demo",style:{display:["m-"+t.id==e.active_menu_key?"block":"none"]},attrs:{"default-active":e.active_submenu_key,"default-openeds":e.opened_submenu_key,"unique-opened":!0,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:e.leftHandleSelect}},e._l(t.sub,function(s){return s.sub?a("el-submenu",{key:s.id,attrs:{index:"m-"+t.id+"-"+s.id}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-location"}),e._v(" "),a("span",[e._v(e._s(s.title))])]),e._v(" "),e._l(s.sub,function(s){return a("el-menu-item",{key:s.id,attrs:{index:"m-"+t.id+"-"+s.id}},[a("router-link",{attrs:{to:s.url+"?spm=m-"+t.id+"-"+s.id}},[a("i",{staticClass:"iconfont icon-group"}),e._v(e._s(s.title)+"\n                  ")])],1)})],2):a("el-menu-item",{key:s.id,attrs:{index:"m-"+t.id+"-"+s.id}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-location"}),e._v(" "),a("router-link",{attrs:{to:s.url+"?spm=m-"+t.id+"-"+s.id}},[a("span",[e._v(e._s(s.title))])])],1)],2)}))})),e._v(" "),a("div",{staticClass:"menu",style:{display:"/index/main"===e.$route.path?"block":"none"}},[a("span",[a("img",{attrs:{src:"/static/images/linshi/user5.png",alt:""}})]),e._v(" "),a("h3",[a("strong",[e._v(e._s(e.role_name))]),e._v(" "),a("br"),e._v("\n              "+e._s(e.username)+"\n            ")]),e._v(" "),a("p",[e._v("\n              欢迎登陆"),a("br"),e._v("\n              营销决策支持系统DSS"),a("br"),e._v("\n              后台管理系统\n            ")]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:function(t){e.logout()}}},[e._v("退出系统")])],1)])]),e._v(" "),a("el-container",{staticClass:"container"},[a("el-header",{staticClass:"header"},[a("el-menu",{attrs:{"default-active":e.active_menu_key,mode:"horizontal","background-color":"#fff","text-color":"#333","active-text-color":"#339ace"},on:{select:e.topHandleSelect}},[e._l(e.menus,function(t){return a("el-menu-item",{key:t.id,staticClass:"el-menuitem topbar-home-link",attrs:{index:"m-"+t.id,"data-menu-target":"m-"+t.id}},[a("a",{attrs:{href:"javascript:;"}},[e._v(e._s(t.title))])])}),e._v(" "),a("li",{staticClass:"extra el-menu-item"},[a("i",{staticClass:"iconfont icon-my_light"}),e._v("\n              "+e._s(e.role_name)+"\n              "),a("span",{on:{click:function(t){e.logout()}}},[e._v("退出")])])],2)],1),e._v(" "),a("el-main",{staticClass:"main"},[a("transition",{attrs:{name:"main"}},[a("router-view",{staticClass:"content"})],1)],1),e._v(" "),a("el-footer",{staticClass:"footer"})],1)],1),e._v(" "),a("div",{staticClass:"opinion"},[a("el-button",{attrs:{icon:"el-icon-edit",size:"small"},on:{click:function(t){e.dialogVisible=!0}}}),e._v(" "),a("el-dialog",{attrs:{title:"用户反馈",visible:e.dialogVisible,width:"700px","modal-append-to-body":!0,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"popup-cont"},[a("el-form",{attrs:{"label-position":"top"}},[a("el-form-item",{staticClass:"demo",attrs:{label:"反馈类型",prop:"region"}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.region,callback:function(t){e.region=t},expression:"region"}},[a("el-option",{attrs:{label:"系统问题",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"界面优化",value:"beijing"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"您的问题或反馈",prop:"desc"}},[a("el-input",{attrs:{type:"textarea",rows:4},model:{value:e.region,callback:function(t){e.region=t},expression:"region"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("立即发送")]),e._v(" "),a("el-button",{attrs:{size:"small"}},[e._v("重置")])],1)],1)],1)])],1)],1)},staticRenderFns:[]};var f=a("Z0/y")(_,v,!1,function(e){a("AWEM")},"data-v-f2b6a01a",null).exports,h={name:"Login",data:function(){return{token:"",ruleForm:{username:"",password:""},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"},{min:4,max:20,message:"长度在 4 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:4,max:20,message:"长度在 4 到 20 个字符",trigger:"blur"}]}}},methods:n()({},Object(i.b)([o.c,o.a]),{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$request.post(t.$interface.CHECK_LOGIN,t.ruleForm,function(e){t.$message({type:"success",message:"欢迎登录我司管理系统"}),t.ADMIN_SIGNIN(e.data),t.token=e.data.token,t.getMenus(function(){t.$router.push({path:"/"})})},function(e){t.$message({type:"error",message:e.msg})})})},getMenus:function(e){var t=this;this.$request.get(this.$interface.INDEX,{token:this.token},function(a){var s=a.data;t.ADMIN_MENUS(s),e()},this.failure)}})},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("div",{staticClass:"center"},[a("img",{attrs:{src:"/static/images/logo.png",alt:""}}),e._v(" "),a("p",[e._v("我司管理系统")]),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[a("el-form-item",{staticClass:"input",attrs:{prop:"username"}},[a("el-input",{attrs:{"prefix-icon":"iconfont icon-people"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),a("el-form-item",{staticClass:"input",attrs:{prop:"password"}},[a("el-input",{attrs:{"prefix-icon":"iconfont icon-suo",type:"password"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("登录")])],1)],1)],1),e._v(" "),e._m(0)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"footer"},[this._v("\n      公司地址：广州市天河区珠江新城东路12号高德置地H座12层（全层） 联系电话：020-83912326 "),t("br"),this._v("\n      © 2013 -2017,技术支持 广州威尔森信息科技有限公司 粤ICP备09206296号-6\n    ")])}]};var g=a("Z0/y")(h,b,!1,function(e){a("z7i6")},"data-v-34d62309",null).exports,k={name:"",data:function(){return{tableData:[{date:"2016-05-03",name:"王小虎",belong:"经理",group:"长安汽车"},{date:"2016-05-02",name:"王小虎",belong:"主管",group:"本田汽车"},{date:"2016-05-04",name:"王小虎",belong:"总经理",group:"通用汽车"},{date:"2016-05-01",name:"王小虎",belong:"总监",group:"马自达汽车"}]}},methods:{handleClick:function(e){console.log(e)}}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"panel"},[a("h2",{staticClass:"title"},[e._v("统计")]),e._v(" "),a("ul",{staticClass:"count"},[a("li",[a("p",[e._v("今日帐户登录量")]),e._v(" "),a("div",{staticClass:"info-box"},[a("i",{staticClass:"iconfont icon-fenxixian"}),e._v(" "),a("span",[a("b",{staticClass:"font-blue"},[e._v("180")]),e._v("人次"),a("br"),e._v(" "),a("cite",[e._v("今日系统登录量")])])])]),e._v(" "),a("li",[a("p",[e._v("累计帐户登录量")]),e._v(" "),a("div",{staticClass:"info-box"},[a("i",{staticClass:"iconfont icon-fangkefenxi",staticStyle:{"font-size":"38px"}}),e._v(" "),a("span",[a("b",{staticClass:"font-blue"},[e._v("1280")]),e._v("人次"),a("br"),e._v(" "),a("cite",[e._v("累计系统登录量")])])])]),e._v(" "),a("li",[a("p",[e._v("系统访问总量")]),e._v(" "),a("div",{staticClass:"info-box"},[a("i",{staticClass:"iconfont icon-liulanqi-IE"}),e._v(" "),a("span",[a("b",{staticClass:"font-blue"},[e._v("3580")]),e._v("人次"),a("br"),e._v(" "),a("cite",[e._v("累计访问录量")])])])])])]),e._v(" "),a("div",{staticClass:"panel"},[a("h2",{staticClass:"title"},[e._v("待办事项清单")]),e._v(" "),a("div",{staticClass:"list"},[a("dl",[a("dt",[a("a",{attrs:{href:""}},[e._v("长安汽车帐户即将过期")]),e._v(" "),a("span",[e._v("\n                  长安汽车账户使用即将过期请及时通知续费。\n                  "),a("br"),a("font",[e._v("2018年2月21日")])],1)]),e._v(" "),a("dd",[e._v("\n                帐户管理 人：张超\n                "),a("br"),a("i",{staticClass:"iconfont icon-dianhua1"}),e._v(" "),a("font",[e._v("13392996655")])],1)]),e._v(" "),a("dl",[a("dt",[a("a",{attrs:{href:""}},[e._v("长安汽车帐户即将过期")]),e._v(" "),a("span",[e._v("\n                 丰田汽车试用账户使用即将过期请及时通知续费。\n                  "),a("br"),a("font",[e._v("2018年2月21日")])],1)]),e._v(" "),a("dd",[e._v("\n                帐户管理 人：李舒\n                "),a("br"),a("i",{staticClass:"iconfont icon-dianhua1"}),e._v(" "),a("font",[e._v("13392996655")])],1)]),e._v(" "),a("dl",[a("dt",[a("a",{attrs:{href:""}},[e._v("宝马汽车帐户即将过期")]),e._v(" "),a("span",[e._v("\n                  宝马汽车账户使用即将过期请及时通知续费。\n                  "),a("br"),a("font",[e._v("2018年2月21日")])],1)]),e._v(" "),a("dd",[e._v("\n                帐户管理 人：田安\n                "),a("br"),a("i",{staticClass:"iconfont icon-dianhua1"}),e._v(" "),a("font",[e._v("13392996655")])],1)])])]),e._v(" "),a("div",{staticClass:"panel"},[a("h2",{staticClass:"title"},[e._v("最新帐户反馈")]),e._v(" "),a("div",{staticClass:"list"},[a("dl",[a("dt",[a("a",{attrs:{href:""}},[e._v("意见与修改")]),e._v(" "),a("span",[e._v("\n                  功能摆放不合理，能否调整一下布局。\n                  "),a("br"),a("font",[e._v("2018年2月21日")])],1)]),e._v(" "),a("dd",[e._v("\n                帐户管理 人：张超\n                "),a("br"),a("i",{staticClass:"iconfont icon-dianhua1"}),e._v(" "),a("font",[e._v("13392996655")])],1)]),e._v(" "),a("dl",[a("dt",[a("a",{attrs:{href:""}},[e._v("用户体验不好")]),e._v(" "),a("span",[e._v("\n                 界面体验不好，能否调整和优化丰田汽车试用账户使用即将过期请及时通知续费\n                  "),a("br"),a("font",[e._v("2018年1月11日")])],1)]),e._v(" "),a("dd",[e._v("\n                帐户管理 人：李舒\n                "),a("br"),a("i",{staticClass:"iconfont icon-dianhua1"}),e._v(" "),a("font",[e._v("13392996655")])],1)]),e._v(" "),a("dl",[a("dt",[a("a",{attrs:{href:""}},[e._v("数据更新过慢")]),e._v(" "),a("span",[e._v("\n                  数据更新过慢，长安汽车账户使用即将过期请及时通知续费。\n                  "),a("br"),a("font",[e._v("2018年1月21日")])],1)]),e._v(" "),a("dd",[e._v("\n                帐户管理 人：田安\n                "),a("br"),a("i",{staticClass:"iconfont icon-dianhua1"}),e._v(" "),a("font",[e._v("13392996655")])],1)])])]),e._v(" "),a("div",{staticClass:"panel"},[a("h2",{staticClass:"title"},[e._v("最近使用的帐户")]),e._v(" "),a("div",{staticClass:"user"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"date",label:"日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"belong",label:"所属角色"}}),e._v(" "),a("el-table-column",{attrs:{prop:"group",label:"所属组"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleClick(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"}},[e._v("编辑")])]}}])})],1)],1)])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"panel"},[a("h2",{staticClass:"title"},[e._v("最近分配的帐户")]),e._v(" "),a("div",{staticClass:"right"},e._l(4,function(t){return a("dl",[a("dt",[a("a",{attrs:{href:""}},[a("img",{attrs:{src:"/static/images/linshi/user5.png",alt:""}})])]),e._v(" "),a("dd",[a("h4",[a("a",{attrs:{href:""}},[e._v("Zxiaohao")]),e._v(" "),a("span",[e._v("长安汽车")])]),e._v(" "),a("p",[a("em",[e._v("20分钟前")]),e._v(" "),a("br"),e._v("他查看了销量目标管理场景模块\n                ")])])])}))])])],1)],1)},staticRenderFns:[]};var x=a("Z0/y")(k,y,!1,function(e){a("Abst")},"data-v-90b654e4",null).exports,F=a("oi+F"),w=a.n(F),$=a("kfHR"),S=a.n($);function C(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=[];return S()(e).forEach(function(e){void 0===e._expanded&&s.default.set(e,"_expanded",t);var n=1;if(void 0!==l&&null!==l&&(n=l+1),s.default.set(e,"_level",n),a&&s.default.set(e,"parent",a),r.push(e),e.children&&e.children.length>0){var i=C(e.children,t,e,n);r=r.concat(i)}}),r}var E={name:"treeTable",props:{data:{type:[Array,Object],required:!0},options:{children:{type:String,default:"children"}},columns:{type:Array,default:function(){return[]}},evalFunc:Function,evalArgs:Array,expandAll:{type:Boolean,default:!1},selectionChange:{type:Function,default:function(){return[]}}},computed:{formatData:function(){var e=void 0;e=Array.isArray(this.data)?this.data:[this.data];var t=this.evalFunc||C,a=this.evalArgs?w()([e,this.expandAll],this.evalArgs):[e,this.expandAll];return t.apply(null,a)}},methods:{showRow:function(e){var t=!e.row.parent||e.row.parent._expanded&&e.row.parent._show;return e.row._show=t,t?"animation:treeTableShow 1s;-webkit-animation:treeTableShow 1s;":"display:none;"},toggleExpanded:function(e){var t=this.formatData[e];t._expanded=!t._expanded},iconShow:function(e,t){var a=this.options&&this.options.children?this.options.children:"children";return 0===e&&t[a]&&t[a].length>0}}},R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",e._b({attrs:{data:e.formatData,"row-style":e.showRow},on:{"selection-change":e.selectionChange}},"el-table",e.$attrs,!1),[0===e.columns.length?a("el-table-column",{attrs:{width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row._level,function(e){return a("span",{key:e,staticClass:"ms-tree-space"})}),e._v(" "),e.iconShow(0,t.row)?a("span",{staticClass:"tree-ctrl",on:{click:function(a){e.toggleExpanded(t.$index)}}},[t.row._expanded?a("i",{staticClass:"el-icon-minus"}):a("i",{staticClass:"el-icon-plus"})]):e._e(),e._v("\n      "+e._s(t.$index)+"\n    ")]}}])}):e._l(e.columns,function(t,s){return a("el-table-column",{key:t.value,attrs:{label:t.text,width:t.width},scopedSlots:e._u([{key:"default",fn:function(l){return[e._l(l.row._level,function(t){return 0===s?a("span",{key:t,staticClass:"ms-tree-space"}):e._e()}),e._v(" "),e.iconShow(s,l.row)?a("span",{staticClass:"tree-ctrl",on:{click:function(t){e.toggleExpanded(l.$index)}}},[l.row._expanded?a("i",{staticClass:"el-icon-minus"}):a("i",{staticClass:"el-icon-plus"})]):e._e(),e._v("\n      "+e._s(l.row[t.value])+"\n    ")]}}])})}),e._v(" "),e._t("default")],2)},staticRenderFns:[]};var j=a("Z0/y")(E,R,!1,function(e){a("lUBD"),a("rAap")},"data-v-8393e284",null).exports;function T(e,t,a,l,r){var n=[],i=[];return S()(e).forEach(function(e){void 0===e._expanded&&s.default.set(e,"_expanded",t);var o=1;if(void 0!==l&&null!==l&&(o=l+1),s.default.set(e,"_level",o),a?(s.default.set(e,"parent",a),n[o]||(n[o]=0),s.default.set(e,"_marginLeft",n[o]+a._marginLeft),s.default.set(e,"_width",e[r]/a[r]*a._width),n[o]+=e._width):(n[e.id]=[],n[e.id][o]=0,s.default.set(e,"_marginLeft",0),s.default.set(e,"_width",1)),i.push(e),e.children&&e.children.length>0){var u=T(e.children,t,e,o,r);i=i.concat(u)}}),i}var I={name:"Group",mixins:[m],components:{treeTable:j},data:function(){return{classuri:"/ajax/group/",dialogVisible:!1,group_name:"",tableData:[],checked_ids:[],ruleForm:{pids:[],group_id:"",group_name:"",desc:""},rules:{pids:[{required:!0,message:"请选择父级分组",trigger:"blur"}],group_name:[{required:!0,message:"请输入分组名称",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],desc:[{required:!1,message:"请填写分组描述",trigger:"blur"}]},optionsSelected:[],propsSelected:{value:"group_id",label:"group_name",children:"_sub_"},page:1,total:0,func:T,expandAll:!1,args:[null,null,"icon"],columns:[{text:"ID",value:"group_id",width:120}]}},mounted:function(){var e=this;this.getToken(function(){e.getList()})},methods:{renderHeader:function(e){return[e("button",{on:{click:this.clickTableSort},class:"button-sort"},["排序"])]},clickTableSort:function(){for(var e=this,t=this,a={},s=document.querySelectorAll('[name^="_"]'),l=0;l<s.length;l++)a[s[l].name]=s[l].value;var r=this.$interface.GROUP_LIST+"?"+this.$helper.queryEncoded({spm:this.spm,token:this.token});this.$request.post(r,c()({},{action:"resort"},a),function(a){e.$message({type:"success",message:a.msg,onClose:function(){t.getList()}})})},handleSelectionChange:function(e){this.checked_ids=e.map(function(e){return e.group_id})},getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=t,this.$request.get(this.$interface.GROUP_LIST,{group_name:this.group_name,page:this.page,spm:this.spm,token:this.token},function(t){e.tableData=t.data.list,e.total=t.data.page.total},this.failure)},add:function(){var e=this;this.clearValidate("ruleForm"),this.$request.get(this.$interface.GROUP_ADD,{token:this.token,spm:this.spm},function(t){e.optionsSelected=t.data.groups,e.ruleForm={pids:[],group_id:"",group_name:"",desc:""},e.dialogVisible=!0},this.failure)},edit:function(e){var t=this;this.clearValidate("ruleForm"),this.$request.get(this.$interface.GROUP_EDIT,{group_id:e,token:this.token,spm:this.spm},function(e){for(var a in t.optionsSelected=e.data.groups,t.ruleForm)e.data.hasOwnProperty(a)&&(t.ruleForm[a]=e.data[a]);t.dialogVisible=!0},this.failure)},save:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t.ruleForm.group_id?"EDIT":"ADD",s=c()({},{token:t.token,spm:t.spm},t.ruleForm);s.pid=s.pids[s.pids.length-1],delete s.pids,t.$request.post(t.$interface["GROUP_"+a],s,function(e){t.dialogVisible=!1,t.getList(),t.$message({type:"success",message:e.msg})},function(e){t.$message({type:"error",message:e.msg})},t.failure)})}}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"account panel"},[a("h1",[e._v("\n      组管理\n      "),a("span",[e.privileges.includes("/group/add")?a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.add()}}},[e._v("添加组")]):e._e(),e._v(" "),e.privileges.includes("/group/del")?a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.dataUpdate({field:"delete",value:0,action:e.classuri+"del"})}}},[e._v("删除组")]):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:e.ruleForm.group_id?"编辑":"添加",visible:e.dialogVisible,width:"700px","modal-append-to-body":!0,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm popup-cont",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"92px"}},[a("el-form-item",{attrs:{label:"父级分组",prop:"pids"}},[a("el-cascader",{attrs:{options:e.optionsSelected,props:e.propsSelected,"change-on-select":""},model:{value:e.ruleForm.pids,callback:function(t){e.$set(e.ruleForm,"pids",t)},expression:"ruleForm.pids"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分组名称",prop:"group_name"}},[a("el-input",{attrs:{placeholder:"请输入分组名称"},model:{value:e.ruleForm.group_name,callback:function(t){e.$set(e.ruleForm,"group_name",t)},expression:"ruleForm.group_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分组描述",prop:"desc"}},[a("el-input",{attrs:{placeholder:"请输入分组描述",type:"textarea"},model:{value:e.ruleForm.desc,callback:function(t){e.$set(e.ruleForm,"desc",t)},expression:"ruleForm.desc"}})],1),e._v(" "),a("div",{staticClass:"popup-btn"},[e.ruleForm.group_id?a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleForm.group_id,expression:"ruleForm.group_id"}],attrs:{type:"hidden",name:"group_id"},domProps:{value:e.ruleForm.group_id},on:{input:function(t){t.target.composing||e.$set(e.ruleForm,"group_id",t.target.value)}}}):e._e(),e._v(" "),a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){e.save("ruleForm")}}},[e._v("保存数据")]),e._v(" "),a("el-button",{attrs:{type:"",size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消编辑")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"search"},[a("span",[e._v("\n        分组名称"),a("br"),e._v(" "),a("el-input",{attrs:{placeholder:"请输入分组名称"},on:{change:function(t){e.getList()}},model:{value:e.group_name,callback:function(t){e.group_name=t},expression:"group_name"}})],1),e._v(" "),a("el-button",{staticStyle:{"margin-top":"27px"},attrs:{type:"primary",icon:"el-icon-search",size:"medium"},on:{click:function(t){e.getList()}}},[e._v("检索")])],1),e._v(" "),a("div",{staticClass:"result"},[a("tree-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,columns:e.columns,evalFunc:e.func,evalArgs:e.args,expandAll:e.expandAll,"tooltip-effect":"dark",selectionChange:e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{width:"90px",label:"排序","render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{name:"_"+e.row.group_id,value:e.row.sort,size:"mini"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"group_id",label:"分组ID",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"group_name",width:"140px",label:"分组名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user.username",label:"所有者",width:"80px","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"desc",label:"描述","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{width:"80px",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("em",{class:[0==t.row.status?"font-ban":"font-allow"]},[e._v(e._s(e.status[t.row.status]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.privileges.includes("/group/edit")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.edit(t.row.group_id)}}},[e._v("编辑")]):e._e(),e._v(" "),e.privileges.includes("/allot/apply")?a("el-button",{attrs:{type:"text"}},[a("a",{staticClass:"font-blue-d",attrs:{href:"#/allot?group_id="+t.row.group_id+"&spm="+e.spm,type:"text",size:"small"}},[e._v("授权")])]):e._e(),e._v(" "),e.privileges.includes("/group/forbid")&&1==t.row.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.dataUpdate({update:t.row.group_id,field:"status",value:0,action:e.classuri+"forbid"})}}},[e._v("禁用")]):e.privileges.includes("/group/resume")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.dataUpdate({update:t.row.group_id,field:"status",value:1,action:e.classuri+"resume"})}}},[e._v("启用")]):e._e(),e._v(" "),e.privileges.includes("/group/del")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.dataUpdate({update:t.row.group_id,field:"delete",value:0,action:e.classuri+"del"})}}},[e._v("删除")]):e._e()]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination-box"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","prev-text":"上一页","next-text":"下一页","current-page":e.page,"page-size":20,total:e.total},on:{"current-change":e.getList,"update:currentPage":function(t){e.page=t}}})],1)])},staticRenderFns:[]};var L=a("Z0/y")(I,D,!1,function(e){a("dx/k")},"data-v-0610991c",null).exports,O={name:"",mixins:[m],data:function(){return{dialogVisible:!1,multipleSelection:[],ruleForm:{group_ids:[],sort:"",role_id:"",role_name:"",desc:""},rules:{group_ids:[{required:!0,message:"请选择所属分组",trigger:"blur"}],role_name:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}]},role_name:"",group_ids:[""],group_id:"",optionsSelected:[],propsSelected:{value:"group_id",label:"group_name",children:"_sub_"},classuri:"/ajax/role/",tableData:[],page:1,total:0}},computed:{},mounted:function(){var e=this;this.getToken(function(){e.getList()})},methods:{renderHeader:function(e){return[e("button",{on:{click:this.clickTableSort},class:"button-sort"},["排序"])]},clickTableSort:function(){for(var e=this,t=this,a={},s=document.querySelectorAll('[name^="_"]'),l=0;l<s.length;l++)a[s[l].name]=s[l].value;var r=this.$interface.ROLE_LIST+"?"+this.$helper.queryEncoded({spm:this.spm,token:this.token});this.$request.post(r,c()({},{action:"resort"},a),function(a){e.$message({type:"success",message:a.msg,onClose:function(){t.getList()}})})},getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=t,this.$request.get(this.$interface.ROLE_LIST,{group_id:this.group_id,role_name:this.role_name,page:this.page,spm:this.spm,token:this.token},function(t){e.tableData=t.data.list,e.total=t.data.page.total,e.optionsSelected=t.data.groups},this.failure)},save:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t.ruleForm.role_id?"EDIT":"ADD",s=c()({},{spm:t.spm,token:t.token},t.ruleForm);s.group_id=s.group_ids[s.group_ids.length-1],delete s.group_ids,t.$request.post(t.$interface["ROLE_"+a],s,function(e){t.dialogVisible=!1,t.getList(),t.$message({type:"success",message:e.msg})},function(e){t.$message({type:"error",message:e.msg})},t.failure)})},addRole:function(){var e=this;this.clearValidate("ruleForm"),this.$request.get(this.$interface.ROLE_ADD,{token:this.token,spm:this.spm},function(t){e.ruleForm={group_ids:t.data.group_ids,desc:"",role_name:""},e.dialogVisible=!0},this.failure)},edit:function(e){var t=this;this.clearValidate("ruleForm"),this.$request.get(this.$interface.ROLE_EDIT,{spm:this.spm,token:this.token,role_id:e},function(e){for(var a in t.ruleForm={group_ids:e.data.group_ids,role_id:"",desc:"",role_name:""},t.ruleForm)e.data.hasOwnProperty(a)&&(t.ruleForm[a]=e.data[a]);t.dialogVisible=!0},this.failure)},changeGroup:function(e){e.length>0?(this.group_id=e[e.length-1],this.getList()):0==e.length&&(this.group_id=e,this.getList())}}},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"account panel"},[a("h1",[e._v("\n    角色管理\n    "),a("span",[e.privileges.includes("/role/add")?a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.addRole()}}},[e._v("添加角色")]):e._e(),e._v(" "),e.privileges.includes("/role/del")?a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.dataUpdate({field:"delete",value:0,action:e.classuri+"del"})}}},[e._v("删除角色")]):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:e.ruleForm.role_id?"编辑角色":"添加角色",visible:e.dialogVisible,width:"700px","modal-append-to-body":!0,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"popup-cont",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"104px"}},[a("el-form-item",{attrs:{label:"父级分组：",prop:"group_ids"}},[a("el-cascader",{attrs:{options:e.optionsSelected,props:e.propsSelected,"change-on-select":""},model:{value:e.ruleForm.group_ids,callback:function(t){e.$set(e.ruleForm,"group_ids",t)},expression:"ruleForm.group_ids"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色名称：",prop:"role_name"}},[a("el-input",{model:{value:e.ruleForm.role_name,callback:function(t){e.$set(e.ruleForm,"role_name",t)},expression:"ruleForm.role_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色描述：",prop:"desc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.desc,callback:function(t){e.$set(e.ruleForm,"desc",t)},expression:"ruleForm.desc"}})],1),e._v(" "),a("el-form-item",[e.ruleForm.role_id?a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleForm.role_id,expression:"ruleForm.role_id"}],attrs:{type:"hidden",name:"role_id"},domProps:{value:e.ruleForm.role_id},on:{input:function(t){t.target.composing||e.$set(e.ruleForm,"role_id",t.target.value)}}}):e._e(),e._v(" "),a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){e.save("ruleForm")}}},[e._v("保存编辑")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"search"},[a("span",[e._v("\n      选择分组"),a("br"),e._v(" "),a("el-cascader",{attrs:{options:[{group_id:"",group_name:"全部"}].concat(e.optionsSelected),props:e.propsSelected,"change-on-select":""},on:{change:e.changeGroup},model:{value:e.group_ids,callback:function(t){e.group_ids=t},expression:"group_ids"}})],1),e._v(" "),a("span",[e._v("\n      查询所有角色请留空"),a("br"),e._v(" "),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.role_name,callback:function(t){e.role_name=t},expression:"role_name"}})],1),e._v(" "),a("el-button",{staticStyle:{"margin-top":"27px"},attrs:{type:"primary",icon:"el-icon-search",size:"medium"},on:{click:function(t){e.getList()}}},[e._v("检索")])],1),e._v(" "),a("div",{staticClass:"result"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{width:"70px",label:"排序","render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{name:"_"+t.row.role_id,value:t.row.sort,size:"mini"},model:{value:t.row.sort,callback:function(a){e.$set(t.row,"sort",a)},expression:"scope.row.sort"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"role_name",label:"角色名称",width:"120px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupFrom.group_name",label:"所属组"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user.username",label:"所有者",width:"120px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"desc",label:"角色描述","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("em",{class:[0==t.row.status?"font-ban":"font-allow"]},[e._v(e._s(e.status[t.row.status]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.privileges.includes("/role/edit")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.edit(t.row.role_id)}}},[e._v("编辑 ")]):e._e(),e._v(" "),e.privileges.includes("/allot/apply")?a("el-button",{attrs:{type:"text"}},[a("a",{staticClass:"font-blue-d",attrs:{href:"#/allot?role_id="+t.row.role_id+"&spm="+e.spm,type:"text",size:"small"}},[e._v("授权")])]):e._e(),e._v(" "),e.privileges.includes("/role/forbid")&&1==t.row.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.dataUpdate({update:t.row.role_id,field:"status",value:0,action:e.classuri+"forbid"})}}},[e._v("禁用")]):e.privileges.includes("/role/resume")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.dataUpdate({update:t.row.role_id,field:"status",value:1,action:e.classuri+"resume"})}}},[e._v("启用")]):e._e(),e._v(" "),e.privileges.includes("/role/del")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.dataUpdate({update:t.row.role_id,field:"delete",value:0,action:e.classuri+"del"})}}},[e._v("删除")]):e._e()]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination-box"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","prev-text":"上一页","next-text":"下一页","current-page":e.page,"page-size":20,total:e.total},on:{"current-change":e.getList,"update:currentPage":function(t){e.page=t}}})],1)])},staticRenderFns:[]};var z=a("Z0/y")(O,N,!1,function(e){a("Njgu")},"data-v-08c4efb0",null).exports,V={name:"User",mixins:[m],data:function(){return{classuri:this.$interface.USER+"/",dialogVisible:!1,dialogVisibleVa:!1,dialogVisibleVb:!1,value1:"",imageUrl:"",ruleForm:{user_id:"",username:"",phone:"",mail:"",group_ids:[],role_ids:[],desc:"",manage_group_ids:[]},ruleForm2:{},ruleForm3:{},rules:{username:[{required:!0,message:"请输入用户账号",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],group_ids:[{required:!0,message:"请选择所属分组",trigger:"blur"}],role_ids:[{required:!0,message:"请选择所属角色",trigger:"blur"}]},groupOptions:[],propsSelected:{value:"group_id",label:"group_name",children:"_sub_"},rolesList:[],rolesForm:[],group_ids:[""],role_id:"",username:"",phone:"",tableData:[],checked_ids:[],is_view:!1,page:1,total:0}},computed:{group_id:function(){var e=this.group_ids;return e.length>0?e[e.length-1]:""}},mounted:function(){var e=this;this.getToken(function(){e.getList()})},methods:{handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(e){e.type},handleSelectionChange:function(e){this.checked_ids=e.map(function(e){return e.user_id})},changeGroup:function(){var e,t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"List";if("List"!=a){var s=this.ruleForm.group_ids;if(!(e=s[s.length-1]||""))return void(this.rolesFrom=[])}else if(!(e=this.group_id))return this.role_id="",void(this.rolesList=[]);this.$request.get(this.$interface.ROLE_ROLES,{group_id:e,spm:this.spm,token:this.token},function(e){"List"==a?t.rolesList=e.data:t.rolesForm=e.data})},getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=t,this.$request.get(this.$interface.USER_LIST,{group_id:this.group_id,role_id:this.role_id,username:this.username,phone:this.phone,page:this.page,spm:this.spm,token:this.token},function(t){e.tableData=t.data.list,e.total=t.data.page.total,e.groupOptions=t.data.groups,e.rolesList=t.data.roles},this.failure)},add:function(){var e=this;this.clearValidate("ruleForm"),this.$request.get(this.$interface.USER_ADD,{token:this.token,spm:this.spm},function(t){e.rolesForm=t.data.roles,e.ruleForm={user_id:"",username:"",phone:"",mail:"",group_ids:t.data.group_ids,role_ids:[],desc:"",manage_group_ids:[]},e.dialogVisible=!0},this.failure)},edit:function(e){var t=this;this.clearValidate("ruleForm"),this.$request.get(this.$interface.USER_EDIT,{user_id:e,token:this.token,spm:this.spm},function(e){for(var a in t.rolesForm=e.data.roles,t.ruleForm)e.data.hasOwnProperty(a)&&(t.ruleForm[a]=e.data[a]);t.dialogVisible=!0},this.failure)},save:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t.ruleForm.user_id?"EDIT":"ADD",s=c()({},{token:t.token,spm:t.spm},t.ruleForm);s.group_id=s.group_ids[s.group_ids.length-1],delete s.group_ids,t.$request.post(t.$interface["USER_"+a],s,function(e){t.dialogVisible=!1,t.getList(t.page),t.$message({type:"success",message:e.msg})},function(e){t.$message({type:"error",message:e.msg})})},this.failure)},view:function(e){var t=this;this.clearValidate("ruleForm"),this.$request.get(this.$interface.USER_EDIT,{user_id:e,token:this.token,spm:this.spm},function(e){t.is_view=!0},this.failure)}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"account panel"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.is_view,expression:"!is_view"}]},[a("h1",[e._v("\n      帐号管理\n      "),a("span",[e.privileges.includes("/user/add")?a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.add()}}},[e._v("添加用户")]):e._e(),e._v(" "),e.privileges.includes("/user/del")?a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.dataUpdate({field:"delete",value:0,action:e.classuri+"del"})}}},[e._v("删除用户")]):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:e.ruleForm.user_id?"编辑用户":"添加用户",visible:e.dialogVisible,width:"700px","modal-append-to-body":!0,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"popup-cont"},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户账号",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入用户名称",clearable:""},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系手机",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入联系手机",clearable:""},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系邮箱",prop:"mail"}},[a("el-input",{attrs:{placeholder:"请输入联系邮箱",clearable:""},model:{value:e.ruleForm.mail,callback:function(t){e.$set(e.ruleForm,"mail",t)},expression:"ruleForm.mail"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属分组",prop:"group_ids"}},[a("el-cascader",{attrs:{options:e.groupOptions,props:e.propsSelected,"change-on-select":""},on:{change:function(t){e.changeGroup("Form")}},model:{value:e.ruleForm.group_ids,callback:function(t){e.$set(e.ruleForm,"group_ids",t)},expression:"ruleForm.group_ids"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属角色",prop:"role_ids"}},[a("el-checkbox-group",{model:{value:e.ruleForm.role_ids,callback:function(t){e.$set(e.ruleForm,"role_ids",t)},expression:"ruleForm.role_ids"}},e._l(e.rolesForm,function(t){return a("el-checkbox",{key:t.role_id,attrs:{label:t.role_id}},[e._v(e._s(t.role_name))])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"用户描述",prop:"desc"}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.ruleForm.desc,callback:function(t){e.$set(e.ruleForm,"desc",t)},expression:"ruleForm.desc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"管理分组",prop:"manage_group_ids"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择管理分组"},model:{value:e.ruleForm.manage_group_ids,callback:function(t){e.$set(e.ruleForm,"manage_group_ids",t)},expression:"ruleForm.manage_group_ids"}},e._l(e.groupOptions,function(e){return a("el-option",{key:e.group_id,attrs:{label:e.group_name,value:e.group_id}})}))],1),e._v(" "),a("el-form-item",[e.ruleForm.user_id?a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleForm.user_id,expression:"ruleForm.user_id"}],attrs:{type:"hidden",name:"user_id"},domProps:{value:e.ruleForm.user_id},on:{input:function(t){t.target.composing||e.$set(e.ruleForm,"user_id",t.target.value)}}}):e._e(),e._v(" "),a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){e.save("ruleForm")}}},[e._v("保存编辑")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1)])],1),e._v(" "),a("div",{staticClass:"search"},[a("span",[e._v("\n        选择分组"),a("br"),e._v(" "),a("el-cascader",{attrs:{options:[{group_id:"",group_name:"全部"}].concat(e.groupOptions),props:e.propsSelected,"change-on-select":""},on:{change:function(t){e.changeGroup("List")}},model:{value:e.group_ids,callback:function(t){e.group_ids=t},expression:"group_ids"}})],1),e._v(" "),a("span",[e._v("\n        选择角色"),a("br"),e._v(" "),a("el-select",{attrs:{disabled:e.propsSelected.length>0&&!e.rolesList.length},on:{change:function(t){e.getList()}},model:{value:e.role_id,callback:function(t){e.role_id=t},expression:"role_id"}},e._l([{role_id:"",role_name:"全部"}].concat(e.rolesList),function(e){return a("el-option",{key:e.role_id,attrs:{label:e.role_name,value:e.role_id}})}))],1),e._v(" "),a("span",[e._v("\n        查询所有用户请留空"),a("br"),e._v(" "),a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),e._v(" "),a("span",[e._v("\n        手机号"),a("br"),e._v(" "),a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),e._v(" "),a("el-button",{staticStyle:{"margin-top":"27px"},attrs:{type:"primary",icon:"el-icon-search",size:"medium"},on:{click:function(t){e.getList()}}},[e._v("检索")])],1),e._v(" "),a("div",{staticClass:"result"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mail",label:"电子邮箱"}}),e._v(" "),a("el-table-column",{attrs:{label:"所属角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.roles&&t.row.roles.length?e._l(t.row.roles,function(t){return a("span",[e._v(e._s(t.role_name))])}):a("span",[e._v("暂无可用角色")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"所属分组"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.groupFrom?a("span",[e._v(e._s(t.row.groupFrom.group_name))]):a("span",[e._v("暂无可用分组")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"login_num",label:"登录次数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"login_at",label:"最后登录"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.privileges.includes("/user/view")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.view(t.row.user_id)}}},[e._v("查看")]):e._e(),e._v(" "),e.privileges.includes("/user/edit")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.edit(t.row.user_id)}}},[e._v("编辑")]):e._e(),e._v(" "),e.privileges.includes("/allot/apply")?a("el-button",{attrs:{type:"text"}},[a("a",{staticClass:"font-blue-d",attrs:{href:"#/allot?user_id="+t.row.user_id+"&spm="+e.spm,type:"text",size:"small"}},[e._v("授权")])]):e._e(),e._v(" "),e.privileges.includes("/user/del")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.dataUpdate({update:t.row.user_id,field:"delete",value:0,action:e.classuri+"del"})}}},[e._v("删除")]):e._e()]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination-box"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","prev-text":"上一页","next-text":"下一页","current-page":e.page,"page-size":20,total:e.total},on:{"current-change":e.getList,"update:currentPage":function(t){e.page=t}}})],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.is_view,expression:"is_view"}]},[a("h1",[e._v("\n      帐号资料\n    ")]),e._v(" "),a("div",{staticClass:"info"},[a("el-card",{staticClass:"box-card noboder"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("帐号信息")]),e._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){e.dialogVisibleVa=!0}}},[e._v("管理")]),e._v(" "),a("el-dialog",{attrs:{title:"修改帐号信息",visible:e.dialogVisibleVa,width:"700px","modal-append-to-body":!0,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisibleVa=t}}},[a("div",{staticClass:"popup-cont"},[a("el-form",{ref:"ruleForm2",attrs:{model:e.ruleForm2,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户ID：",prop:"region"}},[a("span",[e._v("12315")])]),e._v(" "),a("el-form-item",{attrs:{label:"所属组：",prop:"region"}},[a("el-select",{attrs:{placeholder:"请选择所属组"},model:{value:e.ruleForm2.name,callback:function(t){e.$set(e.ruleForm2,"name",t)},expression:"ruleForm2.name"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所属用户：",prop:"region"}},[a("el-select",{attrs:{placeholder:"请选择所属用户"},model:{value:e.ruleForm2.name,callback:function(t){e.$set(e.ruleForm2,"name",t)},expression:"ruleForm2.name"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"登录名：",prop:"name"}},[a("el-input",{model:{value:e.ruleForm2.name,callback:function(t){e.$set(e.ruleForm2,"name",t)},expression:"ruleForm2.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"使用地：",prop:"region"}},[a("el-select",{attrs:{placeholder:"请选择省份"},model:{value:e.ruleForm2.name,callback:function(t){e.$set(e.ruleForm2,"name",t)},expression:"ruleForm2.name"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1),e._v(" "),a("el-select",{attrs:{placeholder:"请选择所在市"},model:{value:e.ruleForm2.name,callback:function(t){e.$set(e.ruleForm2,"name",t)},expression:"ruleForm2.name"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"原始密码：",prop:"region"}},[a("span",[e._v("12315")])]),e._v(" "),a("el-form-item",{attrs:{label:"新密码：",prop:"name"}},[a("el-input",{model:{value:e.ruleForm2.name,callback:function(t){e.$set(e.ruleForm2,"name",t)},expression:"ruleForm2.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码：",prop:"name"}},[a("el-input",{model:{value:e.ruleForm2.name,callback:function(t){e.$set(e.ruleForm2,"name",t)},expression:"ruleForm2.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success",size:"small"}},[e._v("立即创建")]),e._v(" "),a("el-button",{attrs:{size:"small"}},[e._v("重置")])],1)],1)],1)])],1),e._v(" "),a("ul",{staticClass:"card-content"},[a("li",{staticClass:"left"},[a("h4",[e._v("\n              所属组："),a("b",[e._v("长安汽车")]),e._v("\n              所属用户："),a("b",[e._v("部门经理")])]),e._v(" "),a("p",[e._v("\n              帐户ID："),a("font",[e._v("321647")]),a("br"),e._v("\n              登录名："),a("font",[e._v("Zxiaohao")]),e._v(" "),a("el-tooltip",{attrs:{content:"使用此帐号可登录前台系统",placement:"right-start",effect:"light"}},[a("span",[e._v("正常登陆")])]),a("br"),e._v("\n              登录密码："),a("font",[e._v("321***")]),a("br"),e._v("\n              使用地："),a("font",[e._v("西安")]),a("br"),e._v("\n              最后登录日期："),a("font",[e._v("2017-5-18 12：38：49")]),a("br"),e._v("\n              登录IP："),a("font",[e._v("192.168.8.6")]),a("br")],1)]),e._v(" "),a("li",{staticClass:"right"},[a("p",[e._v("\n              帐号添加人："),a("font",[e._v("张小刚")]),a("em",[e._v("[管理员]")]),a("br"),e._v("\n              添加日期："),a("font",[e._v("2017-5-18 12：38：49")]),a("br"),e._v("\n              使用有效期："),a("font",[e._v("2018-5-18 12：38：49")]),a("br")],1)])])]),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("基本资料")]),e._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){e.dialogVisibleVb=!0}}},[e._v("管理")]),e._v(" "),a("el-dialog",{attrs:{title:"修改帐号信息",visible:e.dialogVisibleVb,width:"700px",center:!0,"modal-append-to-body":!0,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisibleVb=t}}},[a("div",{staticClass:"popup-cont"},[a("el-form",{ref:"ruleForm3",attrs:{model:e.ruleForm3,"label-width":"100px"}},[a("el-form-item",[a("div",{staticClass:"upload-img"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),a("font",[e._v("当前头像:")]),e._v(" "),a("img",{attrs:{src:"/static/images/linshi/user5.png",alt:""}})],1)],1)]),e._v(" "),a("el-form-item",{attrs:{label:"真实姓名：",prop:"name"}},[a("el-input",{model:{value:e.ruleForm3.name,callback:function(t){e.$set(e.ruleForm3,"name",t)},expression:"ruleForm3.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别：",prop:"region"}},[a("el-select",{attrs:{placeholder:"请选择您的性别"},model:{value:e.ruleForm3.name,callback:function(t){e.$set(e.ruleForm3,"name",t)},expression:"ruleForm3.name"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"生日：",prop:"region"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"现居住地：",prop:"region"}},[a("el-select",{staticStyle:{width:"30%"},attrs:{placeholder:"请选择省份"},model:{value:e.ruleForm3.name,callback:function(t){e.$set(e.ruleForm3,"name",t)},expression:"ruleForm3.name"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1),e._v(" "),a("el-select",{staticStyle:{width:"30%"},attrs:{placeholder:"请选择所在市"},model:{value:e.ruleForm3.name,callback:function(t){e.$set(e.ruleForm3,"name",t)},expression:"ruleForm3.name"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1),e._v(" "),a("el-select",{staticStyle:{width:"30%"},attrs:{placeholder:"请选择所在地址"},model:{value:e.ruleForm3.name,callback:function(t){e.$set(e.ruleForm3,"name",t)},expression:"ruleForm3.name"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码：",prop:"name"}},[a("el-input",{model:{value:e.ruleForm3.name,callback:function(t){e.$set(e.ruleForm3,"name",t)},expression:"ruleForm3.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"E-mail：",prop:"name"}},[a("el-input",{model:{value:e.ruleForm3.name,callback:function(t){e.$set(e.ruleForm3,"name",t)},expression:"ruleForm3.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success",size:"small"}},[e._v("立即修改")]),e._v(" "),a("el-button",{attrs:{size:"small"}},[e._v("取消")])],1)],1)],1)])],1),e._v(" "),a("ul",{staticClass:"card-content"},[a("li",{staticClass:"left"},[a("p",[e._v("\n              姓名："),a("font",[e._v("张小姐")]),a("br"),e._v("\n              手机："),a("font",[e._v("135 8798 4654")]),a("br"),e._v("\n              邮箱："),a("font",[e._v("wera@163.com")]),a("br"),e._v("\n              性别："),a("font",[e._v("女")]),a("br"),e._v("\n              生日："),a("font",[e._v("未填写")]),a("br"),e._v("\n              现居住地："),a("font",[e._v("广东")]),a("br"),e._v("\n              固定电话："),a("font",[e._v("未填写")]),a("br"),e._v("\n              描述："),a("font",[e._v("长安汽车员工长安汽车员工长安汽车员工")]),a("br")],1)]),e._v(" "),a("li",{staticClass:"right"},[a("p",[e._v("当前头像：")]),e._v(" "),a("img",{attrs:{src:"/static/images/linshi/user5.png",alt:""}}),e._v(" "),a("img",{staticClass:"big-img",attrs:{src:"/static/images/linshi/user5.png",alt:""}})])])])],1)])])},staticRenderFns:[]};var q=a("Z0/y")(V,A,!1,function(e){a("edhX")},"data-v-62c4c47b",null).exports,P={name:"Log",mixins:[m],data:function(){return{classuri:this.$interface.LOG+"/",dialogVisible:!1,actions:[],action:"",username:"",content:"",tableData:[],checked_ids:[],is_view:!1,page:1,total:0}},mounted:function(){var e=this;this.getToken(function(){e.getList()})},methods:{beforeAvatarUpload:function(e){e.type},handleSelectionChange:function(e){this.checked_ids=e.map(function(e){return e.id})},getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=t,this.$request.get(this.$interface.LOG_LIST,{action:this.action,username:this.username,content:this.content,page:this.page,spm:this.spm,token:this.token},function(t){e.tableData=t.data.list,e.actions=t.data.actions,e.total=t.data.page.total})}}},U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"account panel"},[a("h1",[e._v("\n    系统操作日志\n    "),a("span",[a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.dataUpdate({field:"delete",value:0,action:e.classuri+"del"})}}},[e._v("删除日志")])],1)]),e._v(" "),a("div",{staticClass:"search"},[a("span",[e._v("\n      选择行为"),a("br"),e._v(" "),a("el-select",{model:{value:e.action,callback:function(t){e.action=t},expression:"action"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.actions,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})],2)],1),e._v(" "),a("span",[e._v("\n      操作者"),a("br"),e._v(" "),a("el-input",{attrs:{placeholder:"请输入操作者"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),e._v(" "),a("span",[e._v("\n      操作内容"),a("br"),e._v(" "),a("el-input",{attrs:{placeholder:"请输入操作内容"},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),e._v(" "),a("el-button",{staticStyle:{"margin-top":"27px"},attrs:{type:"primary",icon:"el-icon-search",size:"medium"},on:{click:function(t){e.getList()}}},[e._v("检索")])],1),e._v(" "),a("div",{staticClass:"result"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"操作者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"node",label:"节点"}}),e._v(" "),a("el-table-column",{attrs:{prop:"action",label:"行为"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.content))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"create_at",label:"操作时间"}})],1)],1),e._v(" "),a("div",{staticClass:"pagination-box"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","prev-text":"上一页","next-text":"下一页","current-page":e.page,"page-size":20,total:e.total},on:{"current-change":e.getList,"update:currentPage":function(t){e.page=t}}})],1)])},staticRenderFns:[]};var M=a("Z0/y")(P,U,!1,function(e){a("hfto")},"data-v-d8ef4d4e",null).exports,B=a("IHPB"),G=a.n(B),Y={name:"Module",mixins:[m],data:function(){return{classuri:"/ajax/module/",dialogVisible:!1,tableData:[],checked_ids:[],ruleForm:{pids:[],id:"",title:"",url:"",icon:""},rules:{pids:[{required:!0,message:"请选择父级模块",trigger:"change"}],title:[{required:!0,message:"请输入模块名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}]},optionsSelected:[],propsSelected:{value:"id",label:"title",children:"sub"},func:T,expandAll:!1,args:[null,null,"icon"],columns:[{text:"ID",value:"id",width:120}]}},mounted:function(){var e=this;this.getToken(function(){e.getList()})},methods:{renderHeader:function(e){return[e("button",{on:{click:this.clickTableSort},class:"button-sort"},["排序"])]},clickTableSort:function(){for(var e=this,t=this,a={},s=document.querySelectorAll('[name^="_"]'),l=0;l<s.length;l++)a[s[l].name]=s[l].value;var r=this.$interface.MODULE_LIST+"?"+this.$helper.queryEncoded({spm:this.spm,token:this.token});this.$request.post(r,c()({},{action:"resort"},a),function(a){e.$message({type:"success",message:a.msg,onClose:function(){t.getList()}})},this.failure)},handleSelectionChange:function(e){this.checked_ids=e.map(function(e){return e.id})},getList:function(){var e=this;this.$request.get(this.$interface.MODULE_LIST,{token:this.token,spm:this.spm},function(t){e.tableData=t.data.list},this.failure)},add:function(){var e=this;this.clearValidate("ruleForm"),this.$request.get(this.$interface.MODULE_ADD,{token:this.token,spm:this.spm},function(t){e.optionsSelected=[{id:0,title:"顶级模块"}].concat(G()(t.data.menus)),e.ruleForm={pids:[],id:"",title:"",url:"",icon:""},e.dialogVisible=!0},this.failure)},edit:function(e){var t=this;this.clearValidate("ruleForm"),this.$request.get(this.$interface.MODULE_EDIT,{id:e,token:this.token,spm:this.spm},function(e){for(var a in t.optionsSelected=[{id:0,title:"顶级模块"}].concat(G()(e.data.menus)),t.ruleForm)e.data.hasOwnProperty(a)&&(t.ruleForm[a]=e.data[a]);t.dialogVisible=!0},this.failure)},save:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t.ruleForm.id?"EDIT":"ADD",s=c()({},{token:t.token,spm:t.spm},t.ruleForm);s.pid=s.pids[s.pids.length-1],delete s.pids,t.$request.post(t.$interface["MODULE_"+a],s,function(e){t.dialogVisible=!1,t.getList(),t.$message({type:"success",message:e.msg})},function(e){t.$message({type:"error",message:e.msg})},t.failure)})}},components:{treeTable:j}},Z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"auth panel"},[a("h1",[e._v("\n    模块管理\n    "),a("span",[e.privileges.includes("/menu/add")?a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.add()}}},[e._v("添加模块")]):e._e(),e._v(" "),e.privileges.includes("/menu/del")?a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.dataUpdate({field:"delete",value:0,action:e.classuri+"del"})}}},[e._v("删除模块")]):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:e.ruleForm.group_id?"编辑模块":"添加模块",visible:e.dialogVisible,width:"700px","modal-append-to-body":!0,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"popup-cont",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"父级模块：",prop:"pids"}},[a("el-cascader",{attrs:{options:e.optionsSelected,props:e.propsSelected,"change-on-select":""},model:{value:e.ruleForm.pids,callback:function(t){e.$set(e.ruleForm,"pids",t)},expression:"ruleForm.pids"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模块名：",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入模块名"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模块链接：",prop:"url"}},[a("el-input",{attrs:{placeholder:"请输入模块链接"},model:{value:e.ruleForm.url,callback:function(t){e.$set(e.ruleForm,"url",t)},expression:"ruleForm.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模块图标：",prop:"icon"}},[a("el-input",{attrs:{placeholder:"请输入模块图标"},model:{value:e.ruleForm.icon,callback:function(t){e.$set(e.ruleForm,"icon",t)},expression:"ruleForm.icon"}})],1),e._v(" "),e.ruleForm.id?a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleForm.id,expression:"ruleForm.id"}],attrs:{type:"hidden",name:"group_id"},domProps:{value:e.ruleForm.id},on:{input:function(t){t.target.composing||e.$set(e.ruleForm,"id",t.target.value)}}}):e._e(),e._v(" "),a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){e.save("ruleForm")}}},[e._v("保存数据")]),e._v(" "),a("el-button",{attrs:{type:"",size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消编辑")])],1)],1)],1),e._v(" "),a("div",[a("tree-table",{attrs:{data:e.tableData,columns:e.columns,evalFunc:e.func,evalArgs:e.args,expandAll:e.expandAll}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{width:"90px",label:"排序","render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{name:"_"+e.row.id,value:e.row.sort,size:"mini"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"80px",label:"图标"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("i",{staticClass:"iconfont",class:[e.row.icon?e.row.icon:"el-icon-location-outline"]})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"菜单名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(t.row.spl+t.row.title)}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"菜单链接","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{width:"80px",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("font",{class:[0==t.row.status?"font-ban":"font-allow"]},[e._v(e._s(e.status[t.row.status]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.privileges.includes("/menu/edit")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.edit(t.row.id)}}},[e._v("编辑")]):e._e(),e._v(" "),e.privileges.includes("/menu/forbid")&&1==t.row.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.dataUpdate({update:t.row.id,field:"status",value:0,action:e.classuri+"forbid"})}}},[e._v("禁用")]):e.privileges.includes("/menu/resume")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.dataUpdate({update:t.row.id,field:"status",value:1,action:e.classuri+"resume"})}}},[e._v("启用")]):e._e(),e._v(" "),e.privileges.includes("/menu/del")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.dataUpdate({update:t.row.id,field:"delete",value:0,action:e.classuri+"del"})}}},[e._v("删除")]):e._e()]}}])})],1)],1)])},staticRenderFns:[]};var H=a("Z0/y")(Y,Z,!1,function(e){a("WnSl")},"data-v-2281eb95",null).exports,J={name:"Node",mixins:[m],data:function(){return{classuri:"/ajax/node/",dialogVisible:!1,tableData:[],checked_ids:[],optionsSelected:[],propsSelected:{value:"id",label:"title",children:"sub"},module_ids:[],privilege_name:"",ruleForm:{id:"",module_ids:[],title:"",url:"",status:1,desc:""},rules:{module_ids:[{required:!0,message:"请输入选择模块",trigger:"change"}],title:[{required:!0,message:"请输入权限名称",trigger:"blur"},{min:2,max:5,message:"长度在 2 到 5 个字符",trigger:"blur"}],url:[{required:!0,message:"请输入权限链接",trigger:"blur"},{min:3,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],status:[{required:!0,message:"请选择是否在线",trigger:"change"}],desc:[{required:!1,message:"请填写活动形式",trigger:"blur"}]},page:1,total:0}},mounted:function(){var e=this;this.getToken(function(){e.getList()})},methods:{handleSelectionChange:function(e){this.checked_ids=e.map(function(e){return e.id})},getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=t,this.$request.get(this.$interface.PRIV_LIST,{module_id:this.module_ids[this.module_ids.length-1]||"",title:this.privilege_name,page:this.page,token:this.token,spm:this.spm},function(t){e.tableData=t.data.list,e.optionsSelected=t.data.modules,e.total=t.data.page.total},this.failure)},add:function(){var e=this;this.clearValidate("ruleForm"),this.$request.get(this.$interface.PRIV_ADD,{token:this.token,spm:this.spm},function(t){e.ruleForm={id:"",module_ids:[],title:"",url:"",status:1,desc:""},e.dialogVisible=!0},this.failure)},edit:function(e){var t=this;this.clearValidate("ruleForm"),this.$request.get(this.$interface.PRIV_EDIT,{id:e,token:this.token,spm:this.spm},function(e){for(var a in t.ruleForm)e.data.hasOwnProperty(a)&&(t.ruleForm[a]=e.data[a]);t.dialogVisible=!0},this.failure)},save:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t.ruleForm.id?"EDIT":"ADD",s=c()({},{token:t.token,spm:t.spm},t.ruleForm);t.$request.post(t.$interface["PRIV_"+a],s,function(e){t.dialogVisible=!1,t.getList(t.page),t.$message({type:"success",message:e.msg})},function(e){t.$message({type:"error",message:e.msg})})},this.failure)}}},X={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"account panel"},[a("h1",[e._v("\n    权限管理\n    "),a("span",[e.privileges.includes("/node/add")?a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.add()}}},[e._v("添加权限")]):e._e(),e._v(" "),e.privileges.includes("/node/del")?a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.dataUpdate({field:"delete",value:0,action:e.classuri+"del"})}}},[e._v("删除权限")]):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:e.ruleForm.id?"编辑权限":"添加权限",visible:e.dialogVisible,width:"700px","modal-append-to-body":!0,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"popup-cont"},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"所属模块",prop:"module_ids"}},[a("el-cascader",{attrs:{options:e.optionsSelected,props:e.propsSelected,"change-on-select":""},model:{value:e.ruleForm.module_ids,callback:function(t){e.$set(e.ruleForm,"module_ids",t)},expression:"ruleForm.module_ids"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限名称",prop:"title"}},[a("el-input",{model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限链接",prop:"url"}},[a("el-input",{model:{value:e.ruleForm.url,callback:function(t){e.$set(e.ruleForm,"url",t)},expression:"ruleForm.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否在线",prop:"status"}},[a("el-select",{model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},[a("el-option",{attrs:{label:"是",value:1}}),e._v(" "),a("el-option",{attrs:{label:"否",value:0}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"权限描述",prop:"desc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.desc,callback:function(t){e.$set(e.ruleForm,"desc",t)},expression:"ruleForm.desc"}})],1),e._v(" "),a("el-form-item",[e.ruleForm.id?a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleForm.id,expression:"ruleForm.id"}],attrs:{type:"hidden",name:"id"},domProps:{value:e.ruleForm.id},on:{input:function(t){t.target.composing||e.$set(e.ruleForm,"id",t.target.value)}}}):e._e(),e._v(" "),a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){e.save("ruleForm")}}},[e._v("保存数据")]),e._v(" "),a("el-button",{attrs:{type:"",size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消编辑")])],1)],1)],1)])],1),e._v(" "),a("div",{staticClass:"search"},[a("span",{staticStyle:{width:"300px"}},[e._v("\n      选择模块"),a("br"),e._v(" "),a("el-cascader",{attrs:{options:[{id:"",title:"全部"}].concat(e.optionsSelected),props:e.propsSelected},on:{change:e.getList},model:{value:e.module_ids,callback:function(t){e.module_ids=t},expression:"module_ids"}})],1),e._v(" "),a("span",[e._v("\n      权限名称"),a("br"),e._v(" "),a("el-input",{attrs:{placeholder:"请输入权限名称"},on:{change:function(t){e.getList()}},model:{value:e.privilege_name,callback:function(t){e.privilege_name=t},expression:"privilege_name"}})],1),e._v(" "),a("el-button",{staticStyle:{"margin-top":"27px"},attrs:{type:"primary",icon:"el-icon-search",size:"medium"},on:{click:function(t){e.getList()}}},[e._v("检索")])],1),e._v(" "),a("div",{staticClass:"result"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{width:"180px",label:"模块名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.module.name))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"权限名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"权限链接","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("em",{class:[0==t.row.status?"font-ban":"font-allow"]},[e._v(e._s(e.status[t.row.status]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.privileges.includes("/node/edit")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.edit(t.row.id)}}},[e._v("编辑")]):e._e(),e._v(" "),e.privileges.includes("/node/forbid")&&1==t.row.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.dataUpdate({update:t.row.id,field:"status",value:0,action:e.classuri+"forbid"})}}},[e._v("禁用")]):e.privileges.includes("/node/resume")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.dataUpdate({update:t.row.id,field:"status",value:1,action:e.classuri+"resume"})}}},[e._v("启用")]):e._e(),e._v(" "),e.privileges.includes("/node/del")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.dataUpdate({update:t.row.id,field:"delete",value:0,action:e.classuri+"del"})}}},[e._v("删除")]):e._e()]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination-box"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","prev-text":"上一页","next-text":"下一页","current-page":e.page,"page-size":20,total:e.total},on:{"current-change":e.getList,"update:currentPage":function(t){e.page=t}}})],1)])},staticRenderFns:[]};var W=a("Z0/y")(J,X,!1,function(e){a("deHP")},"data-v-b44a8a7a",null).exports,Q=a("HzJ8"),K=a.n(Q),ee=a("L7Pj"),te=a.n(ee),ae={name:"Allot",mixins:[m],data:function(){return{checkedNodes:[],dialogVisibleVa:!1,activeName:"系统管理",ruleForm:{nodes:[],regions:[],group_ids:[],role_id:"",user_id:""},rules:{},group_id:Number(this.$route.query.group_id)||"",role_id:Number(this.$route.query.role_id)||"",user_id:Number(this.$route.query.user_id)||"",groups:[],roles:[],users:[],nodes:[],resources:[],nodes_map:{},groupOptions:[],propsSelected:{value:"group_id",label:"group_name",children:"_sub_"},resource_types:{1:"销量",2:"价格",3:"终端支持",4:"产品",5:"渠道"},res_id:"",type_ids:[],daterange:"",baseInfo:{},manfs_map:{},manfs:[],brands:[],models:[],selected_manf_ids:[],selected_brand_ids:[],selected_model_ids:[],selected_manfs:[],selected_brands:[],selected_models:[],letter_selected:{manfsBoxForIndex:"A"},maxItem:10,manfName:"",lookErrorClass:!1,lookManfIds:[],lookManfId:"",vo:{},regions:{},activeBrandName:"新别克",checkedRegions:[],range:1}},mounted:function(){var e=this;this.getToken(function(){e.getBaseData(),e.getNodeData(),e.getRegionData()})},watch:{checkedNodes:function(){this.initNodes()},checkedRegions:function(){this.initNodes("regions")}},computed:{manfsGroupByLetter:function(){var e={},t=!0,a=!1,s=void 0;try{for(var l,r=K()(this.manfs);!(t=(l=r.next()).done);t=!0){var n=l.value;n.first_letter=n.first_letter||"",e.hasOwnProperty(n.first_letter)||(e[n.first_letter]=[]),e[n.first_letter].push(n)}}catch(e){a=!0,s=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw s}}return e},brands_map:function(){var e={};for(var t in this.baseInfo.brand){var a=this.baseInfo.brand[t];for(var s in a){var l=a[s];e[l.id]=l}}return e},brands_grouped:function(){var e=[],t=this.manfs_map;return this.selected_manf_ids.length>0?this.selected_manf_ids.map(function(a){if(t.hasOwnProperty(a)){var s=t[a];e.push(s)}}):e=this.baseInfo.brand||[],e},models_grouped:function(){var e=this.brands_map,t=[];return this.selected_brand_ids.length>0&&this.selected_brand_ids.map(function(a){if(e.hasOwnProperty(a)){var s=e[a];t.push(s)}}),t}},methods:{getNode:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"path",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_sub_",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],r=this;return e.map(function(e){e[a]&&0==l.length&&(e[a]==t?l.push(e):e.hasOwnProperty(s)&&r.getNode(e[s],t,a,s,l))}),l},initNodes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"nodes",t=this["checked"+this.ucfirst(e)],a=[];for(var s in t)for(var l in t[s]){(t[s][l]||[]).map(function(e){var t=e.split("-"),s=t[t.length-1];a.includes(s)||a.push(s)})}this.ruleForm[e]=a.filter(function(e){return""!=e})},handleCheckAllChange2:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"nodes",r="checked"+this.ucfirst(l),n=t.substr(0,t.lastIndexOf("-"))||t,i=n.substr(0,n.lastIndexOf("-")),o=this.getNode(this[l],n)[0];o.hasOwnProperty("_sub_")&&o._sub_.length;if(this[r][3]&&a.length>0){var u=this;this[r][3][t]=e.includes(t)?a.map(function(e){return e.path}):[],a.map(function(e){u.handleCheckAllChange3(u[r][3][t],e.path,e._sub_||[],!1,l)})}if(n&&this[r][1][i]&&s)if(e.length===length)this[r][1][i].push(n);else if(this[r][1][i]){var c=this[r][1][i].findIndex(function(e){return e==n});-1==c||this[r][1][i].splice(c,1)}this[r].push({}),this[r].pop()},handleCheckAllChange3:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"nodes",r="checked"+this.ucfirst(l),n=t.substr(0,t.lastIndexOf("-"))||t,i=n.substr(0,n.lastIndexOf("-")),o=this.getNode(this[l],n)[0],u=o.hasOwnProperty("_sub_")?o._sub_.length:0;if(this[r][4]&&a.length>0&&(this[r][4][t]=e.includes(t)?a.map(function(e){return e.path}):[]),n&&this[r][2][i]&&s){if(e.length===u)this[r][2][i].push(n);else{var c=this[r][2][i].findIndex(function(e){return e==n});-1==c||this[r][2][i].splice(c,1)}this.handleCheckAllChange2(this[r][2][i]||[],n,[],"",l)}this[r].push({}),this[r].pop()},handleCheckAllChange4:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"nodes",l="checked"+this.ucfirst(s),r=this.getNode(this[s],a)[0],n=a.substr(0,a.lastIndexOf("-")),i=r.hasOwnProperty("_sub_")?r._sub_.length:0;if(this[l]&&this[l][5],a&&this[l]&&this[l][3][n]){if(e.length===i)this[l][3][n].push(a);else if(this[l][3][n]){var o=this[l][3][n].findIndex(function(e){return e==a});-1==o||this[l][3][n].splice(o,1)}this.handleCheckAllChange3(this[l][3][n]||[],a,[],"",s)}this[l].push({}),this[l].pop()},getBaseData:function(){var e=this;this.$request.get(this.$interface.ALLOT_APPLY,{group_id:this.group_id,role_id:this.role_id,user_id:this.user_id,token:this.token,spm:this.spm},function(t){for(var a in e.groupOptions=t.data.groups,e.roles=t.data.roles,e.users=t.data.users,e.ruleForm)t.data.hasOwnProperty(a)&&(e.ruleForm[a]=t.data[a])},this.failure)},getNodeData:function(){var e=this;this.$request.get(this.$interface.ALLOT_APPLY,{group_id:this.group_id,role_id:this.role_id,user_id:this.user_id,action:"getNode",token:this.token,spm:this.spm},function(t){e.nodes=t.data,e.activeName=e.nodes[0].title,e.nodes_map={},e.$helper.arr2table(e.nodes,"id","pid","_sub_").map(function(t){e.nodes_map[t.path]=t.url}),e.checkedNodes=e.$helper.recurse(e.nodes,"path","_sub_"),e.$nextTick(function(){e.initNodes()})},this.failure)},changeGroup:function(){var e=this,t=this.ruleForm.group_ids,a=t.length>0?t[t.length-1]:"";this.role_id||this.user_id?this.$request.get(this.$interface.ROLE_ROLES,{group_id:a,spm:this.spm,token:this.token},function(t){t.data.length>0?(e.roles=t.data,e.ruleForm.role_id=e.roles[0].role_id,e.changeRole()):(e.roles=[],e.users=[],e.ruleForm.role_id="",e.ruleForm.user_id="")},this.failure):(this.group_id=a,this.$router.push({query:{group_id:this.group_id,spm:this.spm}}),this.checkedNodes=[],this.getNodeData())},changeRole:function(){var e=this,t=this.ruleForm.group_ids,a=t.length>0?t[t.length-1]:"",s=this.ruleForm.role_id;this.user_id?this.$request.get(this.$interface.USER_USERS,{group_id:a,role_id:s,spm:this.spm,token:this.token},function(t){t.data.length>0?(e.users=t.data,e.ruleForm.user_id=e.users[0].user_id,e.changeUser()):(e.users=[],e.ruleForm.user_id="")},this.failure):(this.role_id=this.ruleForm.role_id,this.$router.push({query:{role_id:this.role_id,spm:this.spm}}),this.checkedNodes=[],this.getNodeData())},changeUser:function(){this.user_id=this.ruleForm.user_id,this.$router.push({query:{user_id:this.user_id,spm:this.spm}}),this.checkedNodes=[],this.getNodeData()},goBack:function(){this.group_id?this.$router.push({path:"/group/index",query:{spm:this.spm}}):this.role_id?this.$router.push({path:"/role/index",query:{spm:this.spm}}):this.user_id?this.$router.push({path:"/user/index",query:{spm:this.spm}}):this.$router.go(-1)},save:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a={action:"save",token:t.token,spm:t.spm,group_ids:t.ruleForm.group_ids,role_id:t.ruleForm.role_id,user_id:t.ruleForm.user_id};a.group_id=a.group_ids[a.group_ids.length-1],delete a.group_ids;var s=t.$interface.ALLOT_APPLY,l=s.indexOf("?");s=(-1==l?s:s.substr(0,l))+"?"+t.$helper.queryEncoded(a);var r="0";if(1==t.range);else if(2==t.range){var n=t.ruleForm.regions.filter(function(e){return-1==e.indexOf("@")});if(1!=n.length)return void t.$message({type:"error",message:"请选择一个区域"});r=n[0].split("@")[0]}else if(3==t.range){var i=t.ruleForm.regions.filter(function(e){return-1!=e.indexOf("@")});if(1!=i.length)return void t.$message({type:"error",message:"请选择一个省份"});r=i[0]}t.$request.post(s,{nodes:t.ruleForm.nodes,regions:r,range:t.range},function(e){t.dialogVisible=!1,t.$message({type:"success",message:e.msg})},function(e){t.$message({type:"error",message:e.msg})},t.failure)}})},getResourceData:function(){var e=this;this.$request.get(this.$interface.ALLOT_APPLY,{group_id:this.group_id,role_id:this.role_id,user_id:this.user_id,action:"getResource",token:this.token,spm:this.spm},function(t){for(var a in t.data)e.resources.push(t.data[a])},this.failure)},getResource:function(e){var t=this;this.res_id=e,this.$request.get(this.$interface.ALLOT_RESOURCE,{group_id:this.group_id,role_id:this.role_id,user_id:this.user_id,res_id:e,token:this.token,spm:this.spm},function(e){t.vo=e.data;var a=JSON.parse(t.vo.manfs),s=JSON.parse(t.vo.brands),l=JSON.parse(t.vo.models);t.selected_manfs=[],t.selected_brands=[],t.selected_models=[],t.getManfs(function(){for(var e in a){var r=a[e];t.selected_manfs.push({id:e,name:r}),t.selected_manf_ids.push(Number(e))}t.selected_brand_ids=s.map(function(e){return t.selected_brands.push({id:e.brand_id,name:e.brand_name}),Number(e.brand_id)}),t.selected_model_ids=l.map(function(e){return t.selected_models.push({id:e.sub_model_id,name:e.sub_model_name}),Number(e.sub_model_id)}),t.dialogVisibleVa=!0})},this.failure)},selectLetter:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.letter_selected[e]=t;var s=document.querySelector("#"+e);if(s){var l=s.querySelector('[data-key="'+t+'"]').offsetTop-s.offsetTop-10;setTimeout(function(){a?te()("#"+e).animate({scrollTop:l},300,"swing"):te()("#"+e).scrollTop(l)},10)}},lookManf:function(e){var t=this.manfName.trim(),a="";if(this.lookErrorClass=!0,t){for(var s in this.manfs){var l=this.manfs[s];if(this.matchName(t,l.manf_name)&&!this.lookManfIds.includes(l.id)){a=l.first_letter,this.lookManfId=l.id,this.lookManfIds.push(l.id);break}s==this.manfs.length-1&&(this.lookManfId="",this.lookManfIds=[])}a&&(this.selectLetter(e,a),this.lookErrorClass=!1)}},matchName:function(e,t){return!!e&&RegExp(""+e).test(t)},checkModel:function(e){var t=this.selected_model_ids.findIndex(function(t){return t==e});t>=0?this.selected_model_ids.splice(t,1):this.selected_model_ids.push(e)},submitData:function(){this.$request.get(this.$interface.ALLOT_RESOURCE,{type:this.type_ids,manfs:this.selected_manf_ids||[],brands:this.selected_brand_ids||[],models:this.selected_model_ids||[],start_date:this.daterange[0],end_date:this.daterange[1],res_id:this.res_id,group_id:this.group_id,role_id:this.role_id,user_id:this.user_id,action:"save",token:this.token,spm:this.spm},function(e){})},getManfs:function(e){var t=this;this.$request.get(this.$interface.GET_NEWS_BASE_INFO,{token:this.token},function(a){t.baseInfo=a.data[0];var s={},l=[];for(var r in t.baseInfo.manf_brand){var n=t.baseInfo.manf_brand[r];for(var i in n){var o=n[i];s[o.id]=o,l.push(o)}}t.manfs_map=s,t.manfs=l,"function"==typeof e&&e()},this.failure)},getRegionData:function(){var e=this;this.$request.get(this.$interface.GET_REGION,{token:this.token,group_id:this.group_id,role_id:this.role_id,user_id:this.user_id},function(t){e.regions=t.data.list||{},e.range=t.data.range||"1",e.checkedRegions=e.$helper.recurse(e.regions,"path","_sub_"),e.$nextTick(function(){e.initNodes("regions")})},this.failure)}}},se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"auth panel"},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[a("h1",[e._v("权限分配"),a("span",[a("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)]),e._v(" "),a("div",{staticClass:"search"},[a("span",[e._v("\n        选择组"),a("br"),e._v(" "),a("el-form-item",{attrs:{prop:"group_ids"}},[a("el-cascader",{attrs:{options:e.groupOptions,props:e.propsSelected,"change-on-select":!0},on:{change:e.changeGroup},model:{value:e.ruleForm.group_ids,callback:function(t){e.$set(e.ruleForm,"group_ids",t)},expression:"ruleForm.group_ids"}})],1)],1),e._v(" "),e.role_id||e.user_id?a("span",[e._v("\n        选择角色"),a("br"),e._v(" "),a("el-form-item",{attrs:{prop:"role_id"}},[a("el-select",{on:{change:e.changeRole},model:{value:e.ruleForm.role_id,callback:function(t){e.$set(e.ruleForm,"role_id",t)},expression:"ruleForm.role_id"}},e._l(e.roles,function(e){return a("el-option",{key:e.role_id,attrs:{label:e.role_name,value:e.role_id}})}))],1)],1):e._e(),e._v(" "),e.user_id?a("span",[e._v("\n        选择帐号"),a("br"),e._v(" "),a("el-form-item",{attrs:{prop:"user_id"}},[a("el-select",{attrs:{placeholder:"全部"},model:{value:e.ruleForm.user_id,callback:function(t){e.$set(e.ruleForm,"user_id",t)},expression:"ruleForm.user_id"}},e._l(e.users,function(e){return a("el-option",{key:e.user_id,attrs:{label:e.username,value:e.user_id}})}))],1)],1):e._e()]),e._v(" "),a("div",{staticClass:"allot"},[a("el-card",{staticClass:"box-card box-cont-pd0"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("后台权限分配")]),e._v(" "),a("el-button",{staticStyle:{float:"right",padding:"4px"},attrs:{type:"text",icon:"iconfont icon-move"}})],1),e._v(" "),e.nodes.length?a("el-tabs",{staticStyle:{"min-height":"300px"},attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.nodes,function(t,s){return a("el-tab-pane",{key:s,attrs:{label:t.title,name:t.title}},e._l(t._sub_,function(s,l){return a("ul",[e.checkedNodes[2]&&e.checkedNodes[3]?a("li",[a("el-checkbox",{attrs:{indeterminate:e.checkedNodes[3][s.path]&&e.checkedNodes[3][s.path].length>0&&e.checkedNodes[3][s.path].length<s._sub_.length,label:s.path,checked:s.checked},on:{change:function(a){e.handleCheckAllChange2(e.checkedNodes[2][t.path],s.path,s._sub_)}},model:{value:e.checkedNodes[2][t.path],callback:function(a){e.$set(e.checkedNodes[2],t.path,a)},expression:"checkedNodes[2][node.path]"}},[e._v(e._s(s.title))])],1):e._e(),e._v(" "),e.checkedNodes[3]&&e.checkedNodes[4]?a("li",e._l(s._sub_,function(t,l){return a("dl",[a("dt",[a("el-checkbox",{attrs:{indeterminate:e.checkedNodes[4]&&e.checkedNodes[4][t.path]&&e.checkedNodes[4][t.path].length>0&&e.checkedNodes[4][t.path].length<t._sub_.length,label:t.path,checked:t.checked},on:{change:function(a){e.handleCheckAllChange3(e.checkedNodes[3][s.path],t.path,t._sub_)}},model:{value:e.checkedNodes[3][s.path],callback:function(t){e.$set(e.checkedNodes[3],s.path,t)},expression:"checkedNodes[3][node2.path]"}},[e._v(e._s(t.title))])],1),e._v(" "),t._sub_?a("dd",e._l(t._sub_,function(s){return a("el-checkbox",{key:s.path,attrs:{label:s.path,checked:s.checked},on:{change:function(a){e.handleCheckAllChange4(e.checkedNodes[4][t.path],s.path,[],t.path)}},model:{value:e.checkedNodes[4][t.path],callback:function(a){e.$set(e.checkedNodes[4],t.path,a)},expression:"checkedNodes[4][node3.path]"}},[e._v(e._s(s.title))])})):e._e()])})):e._e()])}))})):e._e()],1),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("功能面板")]),e._v(" "),a("el-button",{staticStyle:{float:"right",padding:"4px"},attrs:{type:"text",icon:"iconfont icon-move"}})],1),e._v(" "),a("ul",[a("li",[a("el-checkbox",{staticClass:"node-name",on:{change:function(t){e.handleCheckAllChange2()}}},[e._v("首页")])],1)])]),e._v(" "),a("el-card",{staticClass:"box-card",staticStyle:{display:"none"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("数据资源")]),e._v(" "),a("el-button",{staticStyle:{float:"right",padding:"4px"},attrs:{type:"text",icon:"iconfont icon-move"}})],1),e._v(" "),a("div",{staticClass:"allot-cont"},[a("p",{staticStyle:{margin:"0 0 10px 0"}},[e._v("\n            已选择的数据资源：\n            "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-plus",size:"small",plain:""},on:{click:function(t){e.getResource()}}},[e._v("配置数据资源")]),e._v(" "),a("el-dialog",{attrs:{title:"请配置数据资源",visible:e.dialogVisibleVa,"modal-append-to-body":!0,width:"1150px","append-to-body":!0},on:{"update:visible":function(t){e.dialogVisibleVa=t}}},[a("div",{staticClass:"popup-cont_allot"},[a("div",{staticClass:"box"},[a("font",[e._v("请选择数据类型：")]),e._v(" "),a("el-checkbox-group",{staticStyle:{display:"inline-block"},model:{value:e.type_ids,callback:function(t){e.type_ids=t},expression:"type_ids"}},e._l(e.resource_types,function(e,t){return a("el-checkbox",{key:t,attrs:{label:e,border:""}})}))],1),e._v(" "),a("div",{staticClass:"box"},[a("font",[e._v("设置时间维度：")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.daterange,callback:function(t){e.daterange=t},expression:"daterange"}})],1),e._v(" "),a("div",{staticClass:"box"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:16}},[a("el-tabs",{staticClass:"box-tabs",attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"厂商维度"}},[a("dl",{staticClass:"popover-main_va"},[a("dt",[e._l(e.manfsGroupByLetter,function(t,s){return a("em",{class:{on:s==e.letter_selected.manfsBoxForIndex},on:{click:function(t){e.selectLetter("manfsBoxForIndex",s)}}},[e._v(e._s(s))])}),e._v(" "),a("span",[a("cite",[e._v("搜索")]),e._v(" "),a("input",{attrs:{type:"text"}}),e._v(" "),a("i",{staticClass:"iconfont icon-sousuo"})])],2),e._v(" "),a("dd",{attrs:{id:"manfsBoxForIndex"}},[a("el-checkbox-group",{attrs:{size:"mini",max:10},model:{value:e.selected_manf_ids,callback:function(t){e.selected_manf_ids=t},expression:"selected_manf_ids"}},e._l(e.manfsGroupByLetter,function(t,s){return a("dl",[a("dt",{attrs:{"data-key":s}},[e._v(e._s(s))]),e._v(" "),a("dd",e._l(t,function(t,s){return a("span",{staticClass:"checkbox-item"},[a("el-checkbox",{key:t.id,class:{on:e.matchName(e.manfName,t.manf_name)&&e.lookManfId==t.id},attrs:{label:t.id}},[e._v(e._s(t.manf_name))])],1)}))])}))],1)])]),e._v(" "),a("el-tab-pane",{attrs:{label:"品牌维度"}},[e.selected_manf_ids.length>0?a("div",{staticClass:"popover-main_vb"},e._l(e.brands_grouped,function(t,s){return a("dl",[a("dt",[e._v(e._s(t.manf_name))]),e._v(" "),a("dd",[a("el-checkbox-group",{model:{value:e.selected_brand_ids,callback:function(t){e.selected_brand_ids=t},expression:"selected_brand_ids"}},e._l(t.brand,function(t,s){return a("el-checkbox-button",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.brand_name))])}))],1)])})):a("div",{staticClass:"popover-main_va"},[a("dt",e._l(e.brands_grouped,function(t,s){return a("em",{class:{on:s==e.letter_selected.brandsBoxForSearch},staticStyle:{"margin-right":"10px"},on:{click:function(t){e.selectLetter("brandsBoxForSearch",s)}}},[e._v(e._s(s))])})),e._v(" "),a("dd",{attrs:{id:"brandsBoxForSearch"}},[a("el-checkbox-group",{attrs:{size:"mini",max:10},model:{value:e.selected_brand_ids,callback:function(t){e.selected_brand_ids=t},expression:"selected_brand_ids"}},e._l(e.brands_grouped,function(t,s){return a("dl",[a("dt",{attrs:{"data-key":s}},[e._v(e._s(s))]),e._v(" "),a("dd",e._l(t,function(t,s){return a("span",{staticClass:"radio-item"},[a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.brand_name))])],1)}))])}))],1)])]),e._v(" "),a("el-tab-pane",{attrs:{label:"车型维度"}},[a("div",{staticClass:"popover-main_vb"},e._l(e.models_grouped,function(t,s){return a("dl",[a("dt",[e._v(e._s(t.brand_name))]),e._v(" "),a("dd",e._l(t.model,function(t,s){return a("span",{class:{on:e.selected_model_ids.includes(t._id)},attrs:{title:t.model_name},on:{click:function(a){e.checkModel(t._id)}}},[e._v(e._s(t.model_name))])}))])}))])],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"selected-box"},[a("dl",[a("dt",[e._v("厂商维度：")]),e._v(" "),a("dd",e._l(e.selected_manfs,function(t,s){return a("span",{attrs:{manfId:t.id}},[e._v(e._s(t.name)),a("i",{on:{click:function(a){e.clearSubItem("manf",t.id)}}},[e._v("x")])])}))]),e._v(" "),a("dl",[a("dt",[e._v("品牌维度：")]),e._v(" "),a("dd",e._l(e.selected_brands,function(t,s){return a("span",{attrs:{brandId:t.id}},[e._v(e._s(t.name)),a("i",{on:{click:function(a){e.clearSubItem("brand",t.id)}}},[e._v("x")])])}))]),e._v(" "),a("dl",[a("dt",[e._v("车型维度：")]),e._v(" "),a("dd",e._l(e.selected_models,function(t,s){return a("span",{attrs:{brandId:t.id}},[e._v(e._s(t.name)),a("i",{on:{click:function(a){e.clearSubItem("model",t.id)}}},[e._v("x")])])}))])])])],1)],1),e._v(" "),a("div",{staticClass:"popup-btn"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){e.submitData()}}},[e._v("保存数据")]),e._v(" "),a("el-button",{attrs:{type:"",size:"small"}},[e._v("取消编辑")])],1)])])],1),e._v(" "),a("div",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.resources,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"res_id",width:"80px",label:"资源ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",width:"80px",label:"数据类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.resource_types[t.row.type]))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"厂商维度"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.manfs))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌维度","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.brands))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"车型维度","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.models))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"时间维度"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.start_date)+"/"+e._s(t.row.end_date))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.getResource(t.row.res_id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"}},[e._v("删除")])]}}])})],1)],1)])]),e._v(" "),a("el-card",{staticClass:"box-card box-cont-pd0"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("区域分配")]),e._v(" "),a("span",{staticStyle:{"margin-left":"30px"}},[a("el-radio-group",{model:{value:e.range,callback:function(t){e.range=t},expression:"range"}},[a("el-radio",{attrs:{label:1}},[e._v("全国")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("区域")]),e._v(" "),a("el-radio",{attrs:{label:3}},[e._v("省份")])],1)],1),e._v(" "),a("el-button",{staticStyle:{float:"right",padding:"4px"},attrs:{type:"text",icon:"iconfont icon-move"}})],1),e._v(" "),e.regions.length&&e.range>1?a("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeBrandName,callback:function(t){e.activeBrandName=t},expression:"activeBrandName"}},e._l(e.regions,function(t,s){return a("el-tab-pane",{key:s,attrs:{label:t.region_name,name:t.region_name}},e._l(t._sub_,function(s,l){return a("ul",{staticClass:"region"},[e.checkedRegions[2]&&e.checkedRegions[3]?a("li",[a("el-checkbox",{attrs:{indeterminate:e.checkedRegions[3][s.path]&&e.checkedRegions[3][s.path].length>0&&e.checkedRegions[3][s.path].length<s._sub_.length,label:s.path,checked:s.checked},on:{change:function(a){e.handleCheckAllChange2(e.checkedRegions[2][t.path],s.path,s._sub_,!0,"regions")}},model:{value:e.checkedRegions[2][t.path],callback:function(a){e.$set(e.checkedRegions[2],t.path,a)},expression:"checkedRegions[2][node.path]"}},[e._v(e._s(s.region_name))])],1):e._e(),e._v(" "),e.checkedRegions[3]&&e.checkedRegions[4]?a("li",e._l(s._sub_,function(t,l){return a("dl",[a("dt",[a("el-checkbox",{attrs:{indeterminate:e.checkedRegions[4]&&e.checkedRegions[4][t.path]&&e.checkedRegions[4][t.path].length>0&&e.checkedRegions[4][t.path].length<t._sub_.length,label:t.path,checked:t.checked},on:{change:function(a){e.handleCheckAllChange3(e.checkedRegions[3][s.path],t.path,t._sub_,!0,"regions")}},model:{value:e.checkedRegions[3][s.path],callback:function(t){e.$set(e.checkedRegions[3],s.path,t)},expression:"checkedRegions[3][node2.path]"}},[e._v(e._s(t.region_name))])],1),e._v(" "),t._sub_?a("dd",e._l(t._sub_,function(s,l){return a("el-checkbox",{key:s.path,attrs:{label:s.path,checked:s.checked},on:{change:function(a){e.handleCheckAllChange4(e.checkedRegions[4][t.path],s.path,[],t.path,"regions")}},model:{value:e.checkedRegions[4][t.path],callback:function(a){e.$set(e.checkedRegions[4],t.path,a)},expression:"checkedRegions[4][node3.path]"}},[e._v(e._s(s.province_name))])})):a("dd")])})):e._e()])}))})):e._e()],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.save("ruleForm")}}},[e._v("更新权限")])],1)])],1)},staticRenderFns:[]};var le=a("Z0/y")(ae,se,!1,function(e){a("fLel")},"data-v-4720e92c",null).exports,re={name:"",data:function(){return{value:"",options:[],dialogVisible:!1,form:{name:""},rules:{},pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},value4:[new Date(2e3,10,10,10,10),new Date(2e3,10,11,10,10)],tableData3:[{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-08",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-06",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-07",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"}]}}},ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"article panel"},[a("h1",[e._v("\n      文章列表\n      "),a("span",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加文章")])],1),e._v(" "),a("el-dialog",{attrs:{title:"智能推送",visible:e.dialogVisible,width:"700px","modal-append-to-body":!0,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",staticClass:"popup-cont",attrs:{model:e.form,rules:e.rules,"label-width":"92px"}},[a("el-form-item",{attrs:{label:"标题：",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序：",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"文章内容：",prop:"desc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"文章管理：",prop:"resource"}},[a("el-radio-group",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},[a("el-radio",{attrs:{label:"可见"}}),e._v(" "),a("el-radio",{attrs:{label:"隐藏"}}),e._v(" "),a("el-radio",{attrs:{label:"删除"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success",size:"small"}},[e._v("保存编辑")]),e._v(" "),a("el-button",{attrs:{size:"small"}},[e._v("取消")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"search"},[a("span",[e._v("\n        选择账号组"),a("br"),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("span",{staticStyle:{"max-width":"420px",width:"420px"}},[e._v("\n        请选择时间"),a("br"),e._v(" "),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange","picker-options":e.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.value4,callback:function(t){e.value4=t},expression:"value4"}})],1),e._v(" "),a("span",[e._v("\n        按ID、发布人"),a("br"),e._v(" "),a("el-input",{attrs:{placeholder:"请输入内容"}})],1),e._v(" "),a("el-button",{staticStyle:{"margin-top":"27px"},attrs:{type:"primary",icon:"el-icon-search",size:"medium"}},[e._v("检索")])],1),e._v(" "),a("div",{staticClass:"result"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData3,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.date))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"}},[e._v("编辑")])]}}])})],1)],1)])},staticRenderFns:[]};var ie=a("Z0/y")(re,ne,!1,function(e){a("gORJ")},"data-v-2c583eb4",null).exports,oe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"article panel"},[a("h1",[e._v("\n    文章类别\n    "),a("span",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加类别")])],1),e._v(" "),a("el-dialog",{attrs:{title:"文章类别",visible:e.dialogVisible,width:"700px","modal-append-to-body":!0,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",staticClass:"popup-cont",attrs:{model:e.form,rules:e.rules,"label-width":"92px"}},[a("el-form-item",{attrs:{label:"类别名称：",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类别排序：",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态：",prop:"resource"}},[a("el-radio-group",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},[a("el-radio",{attrs:{label:"可用"}}),e._v(" "),a("el-radio",{attrs:{label:"不可用"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success",size:"small"}},[e._v("保存编辑")]),e._v(" "),a("el-button",{attrs:{size:"small"}},[e._v("取消")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"result"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData3,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.date))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.$router.push({path:"/feedback/list"})}}},[e._v("查看")])]}}])})],1)],1)])},staticRenderFns:[]};var ue=a("Z0/y")({name:"",data:function(){return{value:"",dialogVisible:!1,form:{name:""},rules:{},tableData3:[{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-08",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-06",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-07",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"}]}}},oe,!1,function(e){a("q2Q2")},"data-v-edb817ce",null).exports,ce={name:"",data:function(){return{value:"",options:[],dialogVisible:!1,form:{name:""},rules:{},pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},value4:[new Date(2e3,10,10,10,10),new Date(2e3,10,11,10,10)],tableData3:[{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-08",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-06",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-07",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"}]}}},de={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"msg panel"},[a("h1",[e._v("\n    消息列表\n    "),a("span",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("发布消息")])],1),e._v(" "),a("el-dialog",{attrs:{title:"智能推送",visible:e.dialogVisible,width:"700px","modal-append-to-body":!0,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",staticClass:"popup-cont",attrs:{model:e.form,rules:e.rules,"label-width":"92px"}},[a("el-form-item",{attrs:{label:"消息内容：",prop:"region"}},[a("el-select",{attrs:{placeholder:"请选择消息内容"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"通知对象：",prop:"region"}},[a("el-select",{attrs:{placeholder:"请选择通知对象"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"标题：",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"消息内容：",prop:"desc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success",size:"small"}},[e._v("保存编辑")]),e._v(" "),a("el-button",{attrs:{size:"small"}},[e._v("取消")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"search"},[a("span",[e._v("\n      请选择消息类型"),a("br"),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("span",{staticStyle:{"max-width":"420px",width:"420px"}},[e._v("\n      请选择时间"),a("br"),e._v(" "),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange","picker-options":e.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.value4,callback:function(t){e.value4=t},expression:"value4"}})],1),e._v(" "),a("span",[e._v("\n      按消息对象、发布人"),a("br"),e._v(" "),a("el-input",{attrs:{placeholder:"按消息对象、发布人"}})],1),e._v(" "),a("el-button",{staticStyle:{"margin-top":"27px"},attrs:{type:"primary",icon:"el-icon-search",size:"medium"}},[e._v("检索")])],1),e._v(" "),a("div",{staticClass:"result"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData3,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.date))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleClick(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"}},[e._v("编辑")])]}}])})],1)],1)])},staticRenderFns:[]};var pe=a("Z0/y")(ce,de,!1,function(e){a("JBPd")},"data-v-121a2b67",null).exports,me={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"msg panel"},[a("h1",[e._v("\n    消息类别\n    "),a("span",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加类别")])],1),e._v(" "),a("el-dialog",{attrs:{title:"消息类别",visible:e.dialogVisible,width:"700px","modal-append-to-body":!0,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",staticClass:"popup-cont",attrs:{model:e.form,rules:e.rules,"label-width":"92px"}},[a("el-form-item",{attrs:{label:"类别名称：",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类别排序：",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态：",prop:"resource"}},[a("el-radio-group",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},[a("el-radio",{attrs:{label:"可用"}}),e._v(" "),a("el-radio",{attrs:{label:"不可用"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success",size:"small"}},[e._v("保存编辑")]),e._v(" "),a("el-button",{attrs:{size:"small"}},[e._v("取消")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"result"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData3,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.date))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.$router.push({path:"/feedback/list"})}}},[e._v("查看")])]}}])})],1)],1)])},staticRenderFns:[]};var _e=a("Z0/y")({name:"",data:function(){return{value:"",dialogVisible:!1,form:{name:""},rules:{},tableData3:[{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-08",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-06",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-07",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"}]}}},me,!1,function(e){a("is0X")},"data-v-5465b1c2",null).exports,ve={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"feedback panel"},[a("h1",[e._v("\n    反馈列表\n  ")]),e._v(" "),a("div",{staticClass:"search"},[a("span",[e._v("\n      请选择问题状态"),a("br"),e._v(" "),a("el-select",{attrs:{placeholder:"默认显示未处理"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("span",[e._v("\n      请选择问题类型"),a("br"),e._v(" "),a("el-select",{attrs:{placeholder:"全部"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("span",[e._v("\n      按消息对象、发布人"),a("br"),e._v(" "),a("el-input",{attrs:{placeholder:"按消息对象、发布人"}})],1),e._v(" "),a("el-button",{staticStyle:{"margin-top":"27px"},attrs:{type:"primary",icon:"el-icon-search",size:"medium"}},[e._v("检索")])],1),e._v(" "),a("div",{staticClass:"result"},[a("el-dialog",{attrs:{title:"反馈详情",visible:e.dialogVisible,width:"700px","modal-append-to-body":!0,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"popup-cont"},[a("div",[e._v("123")]),e._v(" "),a("div",{staticClass:"popup-btn"},[a("el-button",{attrs:{type:"success",size:"small"}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{type:"",size:"small"}},[e._v("取消")])],1)])]),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData3,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.date))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){}}},[e._v("隐藏")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.$router.push({path:"/feedback/detail"})}}},[e._v("查看")])]}}])})],1)],1)])},staticRenderFns:[]};var fe=a("Z0/y")({name:"",data:function(){return{value:"",options:[],dialogVisible:!1,tableData3:[{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-08",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-06",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-07",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"}]}}},ve,!1,function(e){a("v5l7")},"data-v-1f7cea3f",null).exports,he={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"feedback panel"},[a("h1",[e._v("\n    反馈类别\n    "),a("span",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加类别")])],1),e._v(" "),a("el-dialog",{attrs:{title:"反馈类别",visible:e.dialogVisible,width:"700px","modal-append-to-body":!0,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",staticClass:"popup-cont",attrs:{model:e.form,rules:e.rules,"label-width":"92px"}},[a("el-form-item",{attrs:{label:"类别名称：",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类别排序：",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态：",prop:"resource"}},[a("el-radio-group",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},[a("el-radio",{attrs:{label:"可用"}}),e._v(" "),a("el-radio",{attrs:{label:"不可用"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success",size:"small"}},[e._v("保存编辑")]),e._v(" "),a("el-button",{attrs:{size:"small"}},[e._v("取消")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"result"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData3,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.date))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.$router.push({path:"/feedback/list"})}}},[e._v("查看")])]}}])})],1)],1)])},staticRenderFns:[]};var be=a("Z0/y")({name:"",data:function(){return{value:"",dialogVisible:!1,form:{name:""},rules:{},tableData3:[{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-08",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-06",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-07",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"}]}}},he,!1,function(e){a("QBHe")},"data-v-1f83acea",null).exports,ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"feedback panel"},[a("h1",[e._v("\n      反馈详情\n    ")]),e._v(" "),a("div",{staticClass:"detail"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:17}},[a("div",[a("h2",[e._v("\n              反馈ID：31356\n              "),a("span",[a("el-button",{attrs:{size:"mini",type:"warning",plain:"",round:""}},[e._v("未处理")])],1)]),e._v(" "),a("dl",{staticClass:"feedback-cont"},[a("dt",[e._v("\n                问题类型： "),a("router-link",{staticClass:"font-blue",attrs:{to:"/feedback/list"}},[e._v("用户体验")]),e._v(" "),a("br")],1),e._v(" "),a("dd",[a("span",[e._v("用户体验不好")]),e._v(" "),a("p",[e._v("界面体验不好，能否调整和优化丰田汽车试用账户使用即将过期请及时通知续费。界面体验不好，能否调整和优化丰田汽车试用账户使用即将过期请及时通知续费。")])])])]),e._v(" "),a("div",[a("h4",[e._v("操作")]),e._v(" "),a("div",{staticClass:"handle"},[a("el-input",{attrs:{type:"textarea",rows:4}}),e._v(" "),a("el-radio-group",[a("el-radio",{attrs:{label:3}},[e._v("未处理")]),e._v(" "),a("el-radio",{attrs:{label:6}},[e._v("已处理")]),e._v(" "),a("el-radio",{attrs:{label:3}},[e._v("隐藏")]),e._v(" "),a("el-radio",{attrs:{label:6}},[e._v("删除")])],1)],1),e._v(" "),a("el-button",{staticStyle:{padding:"9px 30px"},attrs:{type:"primary",size:"small"}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:function(t){e.$router.push({path:"/feedback/list"})}}},[e._v("返回")])],1)]),e._v(" "),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"right"},[a("p",[e._v("\n              创建日期：2017-5-5 12:36"),a("br"),e._v("\n              更新日期：2017-5-5 12:36"),a("br"),e._v("\n              版本号：DSS 1.0\n            ")]),e._v(" "),a("dl",[a("dt",[a("img",{attrs:{src:"/static/images/linshi/user5.png",alt:""}})]),e._v(" "),a("dd",[e._v("\n                姓名："),a("font",[e._v("张小姐")]),a("br"),e._v("\n                手机："),a("font",[e._v("135 8798 4654")]),a("br"),e._v("\n                邮箱："),a("font",[e._v("wera@163.com")]),a("br"),e._v("\n\n                所属组："),a("font",[e._v("长安汽车")]),a("br"),e._v("\n                所属角色："),a("font",[e._v("部门经理")]),e._v(" "),a("br"),e._v("\n                帐户ID："),a("font",[e._v("321647")]),e._v(" "),a("br"),e._v("\n                登录名："),a("font",[e._v("Zxiaohao")]),a("br")],1)])])])],1)],1)])},staticRenderFns:[]};var ke=a("Z0/y")({name:"",data:function(){return{}}},ge,!1,function(e){a("cEs2")},"data-v-78c5051f",null).exports,ye={name:"ShouhouList",mixins:[m],data:function(){return{classuri:"/ajax/group/",dialogVisible:!1,group_name:"",tableData:[],checked_ids:[],charge_type:"",options:[{label:"免费",value:1},{label:"收费",value:2}],ruleForm:{post_time:[],charge_type:1,contributor:""},rules:{},optionsSelected:[],propsSelected:{value:"group_id",label:"group_name",children:"_sub_"},page:1,page_size:20,total:0}},computed:{charge_types:function(){var e={};return this.options.map(function(t){e[t.value]=t.label}),e}},mounted:function(){var e=this;this.getToken(function(){e.getList()})},methods:{clickTableSort:function(){for(var e=this,t=this,a={},s=document.querySelectorAll('[name^="_"]'),l=0;l<s.length;l++)a[s[l].name]=s[l].value;var r=this.$interface.GROUP_LIST+"?"+this.$helper.queryEncoded({spm:this.spm,token:this.token});this.$request.post(r,c()({},{action:"resort"},a),function(a){e.$message({type:"success",message:a.msg,onClose:function(){t.getList()}})})},handleSelectionChange:function(e){this.checked_ids=e.map(function(e){return e.group_id})},getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$refs.ruleForm.validate(function(a){e.page=t;var s={header:{token:e.token},page:e.page,rows:e.page_size,start_ymd:e.ruleForm.post_time&&2==e.ruleForm.post_time.length?e.ruleForm.post_time[0]:"",end_ymd:e.ruleForm.post_time&&2==e.ruleForm.post_time.length?e.ruleForm.post_time[1]:"",charge_type:e.ruleForm.charge_type,id_contributor:e.ruleForm.contributor};e.$request.get(e.$interface.GET_FILE_REPORT_LIST,s,function(t){var a=t.data[0];e.tableData=a.list,e.total=a.total},e.failure)})},add:function(){var e=this;this.clearValidate("ruleForm"),this.$request.get(this.$interface.GROUP_ADD,{token:this.token,spm:this.spm},function(t){e.optionsSelected=t.data.groups,e.ruleForm={pids:[],group_id:"",group_name:"",desc:""},e.dialogVisible=!0},this.failure)},edit:function(e){var t=this;this.clearValidate("ruleForm"),this.$request.get(this.$interface.GROUP_EDIT,{group_id:e,token:this.token,spm:this.spm},function(e){for(var a in t.optionsSelected=e.data.groups,t.ruleForm)e.data.hasOwnProperty(a)&&(t.ruleForm[a]=e.data[a]);t.dialogVisible=!0},this.failure)},save:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t.ruleForm.group_id?"EDIT":"ADD",s=c()({},{token:t.token,spm:t.spm},t.ruleForm);s.pid=s.pids[s.pids.length-1],delete s.pids,t.$request.post(t.$interface["GROUP_"+a],s,function(e){t.dialogVisible=!1,t.getList(),t.$message({type:"success",message:e.msg})},function(e){t.$message({type:"error",message:e.msg})},t.failure)})}}},xe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"shouhou panel"},[a("h1",[e._v("\n      报表管理\n      "),a("span",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.$router.push({path:"/shouhou/upload",query:{spm:e.spm}})}}},[e._v("上传文件")])],1)]),e._v(" "),a("div",{staticClass:"search"},[a("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px",inline:!0,"label-position":"top"}},[a("span",{staticStyle:{width:"360px"}},[a("el-form-item",{attrs:{label:"日期",prop:"post_time"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"",format:"yyyy-MM-dd","value-format":"yyyyMMdd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.ruleForm.post_time,callback:function(t){e.$set(e.ruleForm,"post_time",t)},expression:"ruleForm.post_time"}})],1)],1),e._v(" "),a("span",[a("el-form-item",{attrs:{label:"按收费类型",prop:"charge_type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.charge_type,callback:function(t){e.$set(e.ruleForm,"charge_type",t)},expression:"ruleForm.charge_type"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("span",[a("el-form-item",{attrs:{label:"报表名称",prop:"contributor"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.ruleForm.contributor,callback:function(t){e.$set(e.ruleForm,"contributor",t)},expression:"ruleForm.contributor"}})],1)],1),e._v(" "),a("el-button",{staticStyle:{"margin-top":"27px"},attrs:{type:"primary",icon:"el-icon-search",size:"medium"},on:{click:function(t){e.getList()}}},[e._v("检索")])],1)],1),e._v(" "),a("div",{staticClass:"result"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{width:"90",prop:"id",label:"文件ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{width:"70",label:"大小"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("number_format")(t.row.size,2))+"M")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"extension",label:"格式",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{label:"收费",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.charge_types[t.row.charge_type]||""))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"type_name",label:"类别",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{label:"所属",width:"120px","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.manf)+" "+e._s(t.row.version))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"download_count",label:"下载次数",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{width:"80px",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("em",{class:[0==t.row.status?"font-ban":"font-allow"]},[e._v(e._s(e.status[t.row.status]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"contributor",label:"发布人"}}),e._v(" "),a("el-table-column",{attrs:{width:"120px",label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("date_format")(t.row.post_time)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.privileges.includes("/group/edit")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.$router.push({path:"/shouhou/view",query:{id:t.row.id,spm:e.spm}})}}},[e._v("查看")]):e._e()]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination-box"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","prev-text":"上一页","next-text":"下一页","current-page":e.page,"page-size":20,total:e.total},on:{"current-change":e.getList,"update:currentPage":function(t){e.page=t}}})],1)])},staticRenderFns:[]};var Fe=a("Z0/y")(ye,xe,!1,function(e){a("ocrw")},"data-v-5687a95e",null).exports,we={data:function(){return{charge_types:{1:"免费",2:"收费"}}}},$e={name:"",mixins:[m,we],data:function(){return{ruleForm:{body_type:"",brand:"",charge_type:"",cover_uuid:"",cust_ids:[],id:"",manf:"",model:"",ordinal:"",report_uuid:"",state:1,title:"",type_id:"",version:""},classify:"1",coverList:[],fileList:[],selectedCustomer:!1,file_types:{},select_manf:[],select_brand:[],select_body_type:[],select_model:[],select_version:[],upload_url:"/api"+this.$interface.UPLOAD_FILE,rules:{type_id:[{required:!0,message:"请选择文件类别",trigger:"blur"}],charge_type:[{required:!0,message:"请选择文件类别",trigger:"blur"}],title:[{required:!0,message:"请输入文件标题",trigger:"blur"},{min:3,max:60,message:"长度在 3 到 60 个字符",trigger:"blur"}],cover_uuid:[{required:!0,message:"请上传封面",trigger:"blur"}],report_uuid:[{required:!0,message:"请上传报告",trigger:"blur"}]},manfs_group:[],letter_selected:{manfsBox:"A"},bodytype_model_version:[]}},computed:{headers:function(){return{token:this.token}}},mounted:function(){this.init()},methods:{handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleSuccess:function(e,t,a){var s=e.data[0];this.ruleForm.cover_uuid=s.uuid},handleChange:function(e,t){this.fileList=t.slice(-3)},changeRadio:function(e){this.selectedCustomer=2==e},handleSuccessFile:function(e,t,a){var s=e.data[0];this.ruleForm.report_uuid=s.uuid},changeOrdinal:function(){1!=this.classify&&(this.ruleForm.ordinal=-1)},selectLetter:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.letter_selected[e]=t;var s=document.querySelector("#"+e);if(s){var l=s.querySelector('[data-key="'+t+'"]').offsetTop-s.offsetTop-10;setTimeout(function(){a?te()("#"+e).animate({scrollTop:l},300,"swing"):te()("#"+e).scrollTop(l)},10)}},selectManf:function(e,t){this.$refs.popover.showPopper=!1,this.ruleForm.manf=e,this.ruleForm.brand="";var a=[];t.map(function(e){a.push({label:e.brand_name,value:e.brand_name})}),this.select_brand=a},selectBrand:function(){(this.ruleForm.manf||this.ruleForm.brand)&&this.GET_BODYTYPE_MODEL_VERSION()},selectBodyType:function(){if(this.ruleForm.body_type){var e=this.ruleForm.body_type;this.select_model=this.select_body_type.find(function(t){return t.body_type==e}).modelVersions||[]}},selectModel:function(){if(this.ruleForm.model){var e=this.ruleForm.model;this.select_version=this.select_model.find(function(t){return t.model==e}).versions||[]}},init:function(){this.GET_COMMON_MANFS_BRANDS(),this.GET_REPORT_TYPES(),console.log(this.upload_url)},GET_COMMON_MANFS_BRANDS:function(){var e=this;this.$request.get(this.$interface.GET_COMMON_MANFS_BRANDS,{header:{token:this.token}},function(t){e.manfs_group=t.data},this.failure)},GET_BODYTYPE_MODEL_VERSION:function(){var e=this;this.$request.get(this.$interface.GET_BODYTYPE_MODEL_VERSION,{header:{token:this.token},manf_names:this.ruleForm.manf||"",brand_names:this.ruleForm.brand||""},function(t){e.select_body_type=t.data},this.failure)},GET_REPORT_TYPES:function(){var e=this;this.$request.get(this.$interface.REPORT_TYPES,{header:{token:this.token}},function(t){var a=t.data[0].list,s={};for(var l in a){var r=a[l];s[r.id]=r.type_name}e.file_types=s},this.failure)},add:function(){this.clearValidate("ruleForm"),this.$request.get(this.$interface.MANAGE_REPORT,{token:this.token,spm:this.spm},function(e){console.log(e)},this.failure)},save:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=c()({},{header:{token:t.token}},t.ruleForm);t.$request.post(t.$interface.MANAGE_REPORT,a,function(e){t.$message({type:"success",message:"上传报表成功"}),t.$router.push({path:"/shouhou/index",query:{spm:t.spm}})},t.failure)})},resetForm:function(e){this.$refs[e].resetFields()}}},Se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"shouhou-upload panel"},[a("h1",[e._v("\n      上传文件\n      "),a("span",[a("el-button",{attrs:{type:"",size:"medium"},on:{click:function(t){e.$router.back(-1)}}},[e._v("返回")])],1)]),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{inline:!0,model:e.ruleForm,rules:e.rules,labelPosition:"top"}},[a("ul",{staticClass:"search"},[a("li",[a("el-form-item",{attrs:{label:"请选文件类型",prop:"type_id"}},[a("el-select",{attrs:{placeholder:"请选文件类型"},model:{value:e.ruleForm.type_id,callback:function(t){e.$set(e.ruleForm,"type_id",t)},expression:"ruleForm.type_id"}},e._l(e.file_types,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"收费",prop:"charge_type"}},[a("el-select",{attrs:{placeholder:"收费"},model:{value:e.ruleForm.charge_type,callback:function(t){e.$set(e.ruleForm,"charge_type",t)},expression:"ruleForm.charge_type"}},e._l(e.charge_types,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}))],1)],1),e._v(" "),a("li",[a("el-form-item",{attrs:{label:"所属厂商"}},[a("el-popover",{ref:"popover",attrs:{placement:"bottom-start","popper-class":"padding0"}},[a("dl",{staticClass:"popover-va"},[a("dt",e._l(e.manfs_group,function(t){return a("em",{attrs:{"data-key":t.py_first_letter},on:{click:function(a){e.selectLetter("manfsBox",t.py_first_letter)}}},[e._v(e._s(t.py_first_letter))])})),e._v(" "),a("dd",{attrs:{id:"manfsBox"}},e._l(e.manfs_group,function(t){return a("ul",e._l(t.manf_brands,function(s){return a("li",{attrs:{"data-key":t.py_first_letter},on:{click:function(t){e.selectManf(s.manf_name,s.brands)}}},[e._v(e._s(t.py_first_letter)+" "+e._s(s.manf_name))])}))}))])]),e._v(" "),a("el-input",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],attrs:{placeholder:"所属厂商"},model:{value:e.ruleForm.manf,callback:function(t){e.$set(e.ruleForm,"manf",t)},expression:"ruleForm.manf"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属品牌"}},[a("el-select",{attrs:{placeholder:"所属品牌"},on:{change:function(t){e.selectBrand()}},model:{value:e.ruleForm.brand,callback:function(t){e.$set(e.ruleForm,"brand",t)},expression:"ruleForm.brand"}},e._l(e.select_brand,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"所属车型"}},[a("el-select",{attrs:{placeholder:"所属车型"},on:{change:function(t){e.selectBodyType()}},model:{value:e.ruleForm.body_type,callback:function(t){e.$set(e.ruleForm,"body_type",t)},expression:"ruleForm.body_type"}},e._l(e.select_body_type,function(e,t){return a("el-option",{key:t,attrs:{label:e.body_type,value:e.body_type}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"所属型号"}},[a("el-select",{attrs:{placeholder:"所属型号"},on:{change:function(t){e.selectModel()}},model:{value:e.ruleForm.model,callback:function(t){e.$set(e.ruleForm,"model",t)},expression:"ruleForm.model"}},e._l(e.select_model,function(e,t){return a("el-option",{key:t,attrs:{label:e.model,value:e.model}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"所属款型"}},[a("el-select",{staticStyle:{width:"380px"},attrs:{placeholder:"所属款型"},model:{value:e.ruleForm.version,callback:function(t){e.$set(e.ruleForm,"version",t)},expression:"ruleForm.version"}},e._l(e.select_version,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1)],1),e._v(" "),a("li",[a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"请输入文件标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入文件标题"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1)],1),e._v(" "),a("li",{staticClass:"hasborder"},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{prop:"cover_uuid"}},[a("el-upload",{staticStyle:{width:"50%"},attrs:{action:e.upload_url,headers:e.headers,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"file-list":e.coverList,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传封面图片")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("图片需小于1MB，仅限JPG、PNG、GIF格式")])],1)],1)],1),e._v(" "),a("li",{staticClass:"hasborder"},[a("el-form-item",{staticStyle:{width:"50%"},attrs:{prop:"report_uuid"}},[a("el-upload",{attrs:{action:e.upload_url,headers:e.headers,"on-change":e.handleChange,"on-success":e.handleSuccessFile,"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传文件")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("文件需小于1MB，仅限XLS/DOC/PPT/PDF格式")])],1)],1)],1),e._v(" "),a("li",{staticClass:"hasborder"},[a("div",[a("el-form-item",{attrs:{label:"排序"}},[a("el-select",{attrs:{placeholder:""},on:{change:e.changeOrdinal},model:{value:e.classify,callback:function(t){e.classify=t},expression:"classify"}},[a("el-option",{attrs:{label:"置顶",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"编号排序",value:"1"}})],1)],1),e._v(" "),1==e.classify?a("el-form-item",{staticStyle:{width:"10%"},attrs:{label:"排序编号"}},[a("el-input",{attrs:{placeholder:"排序编号"},model:{value:e.ruleForm.ordinal,callback:function(t){e.$set(e.ruleForm,"ordinal",t)},expression:"ruleForm.ordinal"}})],1):e._e()],1),e._v(" "),a("div",{staticStyle:{position:"relative"}},[a("el-form-item",[a("el-radio-group",{on:{change:function(t){e.changeRadio(e.ruleForm.state)}},model:{value:e.ruleForm.state,callback:function(t){e.$set(e.ruleForm,"state",t)},expression:"ruleForm.state"}},[a("el-radio",{attrs:{label:"1"}},[e._v("所有客户可见")]),e._v(" "),a("el-radio",{attrs:{label:"3"}},[e._v("隐藏")]),e._v(" "),a("el-radio",{attrs:{label:"4"}},[e._v("删除")])],1)],1),e._v(" "),e.selectedCustomer?a("span",{staticClass:"triangle"}):e._e(),e._v(" "),e.selectedCustomer?a("div",{staticClass:"selected-customer"},[a("h3",[e._v("\n               已选客户：\n               "),a("em",[e._v("奥迪 "),a("i",[e._v("x")])]),e._v(" "),a("em",[e._v("奥迪 "),a("i",[e._v("x")])]),e._v(" "),a("em",[e._v("奥迪 "),a("i",[e._v("x")])]),e._v(" "),a("em",[e._v("奥迪 "),a("i",[e._v("x")])]),e._v(" "),a("em",[e._v("奥迪 "),a("i",[e._v("x")])]),e._v(" "),a("a",{attrs:{href:"javascript:void(0)"}},[e._v("重置")])]),e._v(" "),a("h4",[a("font",{staticClass:"on"},[e._v("A")]),e._v(" "),a("font",[e._v("B")]),e._v(" "),a("font",[e._v("C")])],1),e._v(" "),a("div",[a("dl",[a("dt",[e._v("A")]),e._v(" "),a("dd",[a("span",[e._v("奥迪")]),e._v(" "),a("span",[e._v("阿斯顿马丁")])])]),e._v(" "),a("dl",[a("dt",[e._v("B")]),e._v(" "),a("dd",[a("span",{staticClass:"on"},[e._v("奔驰")]),e._v(" "),a("span",[e._v("宝马")])])]),e._v(" "),a("dl",[a("dt",[e._v("B")]),e._v(" "),a("dd",[a("span",[e._v("奔驰")]),e._v(" "),a("span",[e._v("宝马")])])]),e._v(" "),a("dl",[a("dt",[e._v("B")]),e._v(" "),a("dd",[a("span",[e._v("奔驰")]),e._v(" "),a("span",[e._v("宝马")])])]),e._v(" "),a("dl",[a("dt",[e._v("B")]),e._v(" "),a("dd",[a("span",[e._v("奔驰")]),e._v(" "),a("span",[e._v("宝马")])])]),e._v(" "),a("dl",[a("dt",[e._v("B")]),e._v(" "),a("dd",[a("span",[e._v("奔驰")]),e._v(" "),a("span",[e._v("宝马")])])]),e._v(" "),a("dl",[a("dt",[e._v("B")]),e._v(" "),a("dd",[a("span",[e._v("奔驰")]),e._v(" "),a("span",[e._v("宝马")])])]),e._v(" "),a("dl",[a("dt",[e._v("B")]),e._v(" "),a("dd",[a("span",[e._v("奔驰")]),e._v(" "),a("span",[e._v("宝马")])])]),e._v(" "),a("dl",[a("dt",[e._v("B")]),e._v(" "),a("dd",[a("span",[e._v("奔驰")]),e._v(" "),a("span",[e._v("宝马")])])]),e._v(" "),a("dl",[a("dt",[e._v("B")]),e._v(" "),a("dd",[a("span",[e._v("奔驰")]),e._v(" "),a("span",[e._v("宝马")])])]),e._v(" "),a("dl",[a("dt",[e._v("B")]),e._v(" "),a("dd",[a("span",[e._v("奔驰")]),e._v(" "),a("span",[e._v("宝马")])])])])]):e._e()],1)]),e._v(" "),a("li",[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save("ruleForm")}}},[e._v("提交")])],1)],1)])])],1)},staticRenderFns:[]};var Ce=a("Z0/y")($e,Se,!1,function(e){a("ZWNW")},"data-v-a55dcf96",null).exports,Ee={name:"",mixins:[m,we],data:function(){return{reportInfo:{},formInfo:{id:"",state:"1"},categories:[],formFileInfo:{title:"",belongs:[],id:"",type_id:1,charge_type:1},rules:{type_id:[{required:!0,message:"请选择文件类别",trigger:"blur"}],charge_type:[{required:!0,message:"请选择文件类别",trigger:"blur"}],title:[{required:!0,message:"请输入文件标题",trigger:"blur"},{min:3,max:60,message:"长度在 3 到 60 个字符",trigger:"blur"}]},selectedCustomer:!1,fileInfoDialogVa:!1,fileInfoDialogVb:!1,belongs:[{value:"benchi",label:"奔驰",children:[{value:"aclass",label:"奔驰A级"},{value:"bclass",label:"奔驰B级"},{value:"cclass",label:"奔驰C级"}]},{value:"aodi",label:"奥迪",children:[{value:"Q50",label:"奥迪Q50"},{value:"Q60",label:"奥迪Q60"},{value:"Q70",label:"奥迪Q70"}]}]}},mounted:function(){this.get_report_types(),this.edit()},methods:{changeRadio:function(e){this.selectedCustomer=2==e},openNotification:function(){this.$notify({title:"操作记录",dangerouslyUseHTMLString:!0,offset:40,position:"bottom-right",message:"\n          <p>发布人: 惠康 [产品研发与交付中心-后市场业务 主管]</p>\n          <cite>发布日期：2018-3-28 12：38：49</cite>\n          "})},get_report_types:function(){var e=this;this.$request.get(this.$interface.REPORT_TYPES,{header:{token:this.token}},function(t){var a=t.data[0].list;e.categories=a})},edit:function(){var e=this;this.$request.get(this.$interface.MANAGE_REPORT,{header:{token:this.token},id:this.$route.query.id},function(t){var a=t.data[0];for(var s in e.reportInfo=a,e.formFileInfo)a.hasOwnProperty(s)&&(e.formFileInfo[s]=isNaN(a[s])?a[s]:Number(a[s]));for(var l in e.formInfo)a.hasOwnProperty(l)&&(e.formInfo[l]=isNaN(a[l])?a[l]:Number(a[l]))},this.failure)},save:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=c()({},{header:{token:t.token}},t.formFileInfo);t.$request.put(t.$interface.MANAGE_REPORT,a,function(e){t.$message({type:"success",message:e.result_msg})},t.failure)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=c()({},{header:{token:t.token}},t.formInfo);t.$request.put(t.$interface.MANAGE_REPORT,a,function(e){t.$message({type:"success",message:e.result_msg})},t.failure)})}}},Re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"shouhou-view panel"},[a("h1",[e._v("\n      文件管理\n      "),a("span",[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(t){e.$router.push("/shouhou/download?spm=m-99-103")}}},[e._v("查看所有操作记录")]),e._v(" "),a("el-button",{attrs:{plainsize:"medium"},on:{click:function(t){e.$router.back(-1)}}},[e._v("返回")])],1)]),e._v(" "),a("ul",[a("li",{staticClass:"fileupload"},[a("h2",[e._v("下载信息")]),e._v(" "),a("span",{staticClass:"infobox hasborder"},[a("b",[e._v(e._s(e.reportInfo.download_users))]),e._v(" "),a("br"),e._v("\n          下载帐户数\n        ")]),e._v(" "),a("span",{staticClass:"infobox"},[a("b",[e._v(e._s(e.reportInfo.download_count))]),e._v(" "),a("br"),e._v("\n        总下载次数\n        ")])]),e._v(" "),a("li",{staticClass:"fileinfo"},[a("el-dialog",{attrs:{title:"文件信息",visible:e.fileInfoDialogVb,width:"50%",center:""},on:{"update:visible":function(t){e.fileInfoDialogVb=t}}},[a("el-form",{ref:"ruleForm",staticClass:"shouhou-view_dialogvb",attrs:{model:e.formFileInfo,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"文件标题",prop:"title"}},[a("el-input",{model:{value:e.formFileInfo.title,callback:function(t){e.$set(e.formFileInfo,"title",t)},expression:"formFileInfo.title"}})],1),e._v(" "),e._e(),e._v(" "),a("el-form-item",{attrs:{label:"文件类别",prop:"type_id"}},[a("el-select",{attrs:{placeholder:"请选择文件类别"},model:{value:e.formFileInfo.type_id,callback:function(t){e.$set(e.formFileInfo,"type_id",t)},expression:"formFileInfo.type_id"}},e._l(e.categories,function(e,t){return a("el-option",{key:t,attrs:{label:e.type_name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"是否收费",prop:"charge_type"}},[a("el-radio-group",{model:{value:e.formFileInfo.charge_type,callback:function(t){e.$set(e.formFileInfo,"charge_type",t)},expression:"formFileInfo.charge_type"}},e._l(e.charge_types,function(t,s){return a("el-radio",{key:s,attrs:{label:Number(s)}},[e._v(e._s(t))])}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){e.save("ruleForm")}}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.fileInfoDialogVb=!1}}},[e._v("取消")])],1)],1)],1),e._v(" "),a("h2",[e._v("\n          文件信息\n          "),a("span",{staticClass:"cont-right",on:{click:function(t){e.fileInfoDialogVb=!0}}},[a("i",{staticClass:"iconfont icon-settings"}),e._v("\n            管理\n          ")])]),e._v(" "),a("img",{attrs:{src:e.reportInfo.cover,alt:""}}),e._v(" "),a("dl",[a("dt",[e._v(e._s(e.reportInfo.filename))]),e._v(" "),e.reportInfo.manf?a("dd",[a("font",[e._v("所属：")]),e._v(e._s(e.reportInfo.manf)+"-"+e._s(e.reportInfo.brand)+"-"+e._s(e.reportInfo.model)+"-"+e._s(e.reportInfo.version)+"-"+e._s(e.reportInfo.styles))],1):e._e(),e._v(" "),a("dd",[a("font",[e._v("文件ID：")]),e._v(e._s(e.reportInfo.id))],1),e._v(" "),a("dd",[a("font",[e._v("文件类别：")]),e._v(e._s(e.reportInfo.type_name))],1),e._v(" "),a("dd",[a("font",[e._v("文件大小：")]),e._v(e._s(e._f("number_format")(e.reportInfo.size,2))+"M")],1),e._v(" "),a("dd",[a("font",[e._v("文件格式：")]),e._v(e._s(e.reportInfo.extension))],1),e._v(" "),a("dd",[a("font",[e._v("是否收费：")]),a("el-tag",{attrs:{size:"small"}},[e._v(e._s(e.charge_types[e.reportInfo.charge_type]))])],1)])],1),e._v(" "),a("li",{staticClass:"filestatus"},[a("el-form",{ref:"formInfo",attrs:{inline:!0,model:e.formInfo,labelPosition:"top"}},[a("div",{staticStyle:{position:"relative"}},[a("el-form-item",[a("el-radio-group",{on:{change:function(t){e.changeRadio(e.formInfo.state)}},model:{value:e.formInfo.state,callback:function(t){e.$set(e.formInfo,"state",t)},expression:"formInfo.state"}},[a("el-radio",{attrs:{label:"1"}},[e._v("所有客户可见")]),e._v(" "),a("el-radio",{attrs:{label:"3"}},[e._v("隐藏")]),e._v(" "),a("el-radio",{attrs:{label:"4"}},[e._v("删除")])],1)],1),e._v(" "),e.selectedCustomer?a("span",{staticClass:"triangle"}):e._e(),e._v(" "),e.selectedCustomer?a("div",{staticClass:"selected-customer"},[a("h3",[e._v("\n                已选客户：\n                "),a("em",[e._v("奥迪 "),a("i",[e._v("x")])]),e._v(" "),a("em",[e._v("奥迪 "),a("i",[e._v("x")])]),e._v(" "),a("em",[e._v("奥迪 "),a("i",[e._v("x")])]),e._v(" "),a("em",[e._v("奥迪 "),a("i",[e._v("x")])]),e._v(" "),a("em",[e._v("奥迪 "),a("i",[e._v("x")])]),e._v(" "),a("a",{attrs:{href:"javascript:void(0)"}},[e._v("重置")])]),e._v(" "),a("h4",[a("font",{staticClass:"on"},[e._v("A")]),e._v(" "),a("font",[e._v("B")]),e._v(" "),a("font",[e._v("C")])],1),e._v(" "),a("div",[a("dl",[a("dt",[e._v("A")]),e._v(" "),a("dd",[a("span",[e._v("奥迪")]),e._v(" "),a("span",[e._v("阿斯顿马丁")])])]),e._v(" "),a("dl",[a("dt",[e._v("B")]),e._v(" "),a("dd",[a("span",{staticClass:"on"},[e._v("奔驰")]),e._v(" "),a("span",[e._v("宝马")])])]),e._v(" "),a("dl",[a("dt",[e._v("B")]),e._v(" "),a("dd",[a("span",[e._v("奔驰")]),e._v(" "),a("span",[e._v("宝马")])])]),e._v(" "),a("dl",[a("dt",[e._v("B")]),e._v(" "),a("dd",[a("span",[e._v("奔驰")]),e._v(" "),a("span",[e._v("宝马")])])]),e._v(" "),a("dl",[a("dt",[e._v("B")]),e._v(" "),a("dd",[a("span",[e._v("奔驰")]),e._v(" "),a("span",[e._v("宝马")])])]),e._v(" "),a("dl",[a("dt",[e._v("B")]),e._v(" "),a("dd",[a("span",[e._v("奔驰")]),e._v(" "),a("span",[e._v("宝马")])])]),e._v(" "),a("dl",[a("dt",[e._v("B")]),e._v(" "),a("dd",[a("span",[e._v("奔驰")]),e._v(" "),a("span",[e._v("宝马")])])]),e._v(" "),a("dl",[a("dt",[e._v("B")]),e._v(" "),a("dd",[a("span",[e._v("奔驰")]),e._v(" "),a("span",[e._v("宝马")])])]),e._v(" "),a("dl",[a("dt",[e._v("B")]),e._v(" "),a("dd",[a("span",[e._v("奔驰")]),e._v(" "),a("span",[e._v("宝马")])])]),e._v(" "),a("dl",[a("dt",[e._v("B")]),e._v(" "),a("dd",[a("span",[e._v("奔驰")]),e._v(" "),a("span",[e._v("宝马")])])]),e._v(" "),a("dl",[a("dt",[e._v("B")]),e._v(" "),a("dd",[a("span",[e._v("奔驰")]),e._v(" "),a("span",[e._v("宝马")])])])])]):e._e()],1)])],1)]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("formInfo")}}},[e._v("提交")])],1)},staticRenderFns:[]};var je=a("Z0/y")(Ee,Re,!1,function(e){a("AgZ+")},"data-v-cbc8ada4",null).exports,Te={name:"Group",mixins:[m],data:function(){return{dialogVisible:!1,tableData:[],checked_ids:[],toTop:!1,if_disabled:!1,sort_disabled:!1,sort:"",startRow:"",ruleForm:{id:"",type_name:"",type_desc:"",ordinal:"",state:1},status:{1:"所有客户可见",2:"指定客户可见",3:"隐藏",4:"删除"},rules:{type_name:[{required:!0,message:"请输入类别名称",trigger:"blur"},{min:2,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}]},page:1,total:0,rows:10}},mounted:function(){var e=this;this.getToken(function(){e.getList()})},watch:{toTop:function(e,t){e?(this.ruleForm.ordinal=-1,this.sort_disabled=!0):(this.ruleForm.ordinal=this.sort,this.sort_disabled=!1)},sort:function(e,t){this.ruleForm.ordinal=e}},methods:{getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=t,this.$request.get(this.$interface.REPORT_TYPES,{header:{token:this.token},page:this.page,rows:this.rows},function(t){e.startRow=t.data[0].startRow,e.tableData=t.data[0].list,e.total=t.data[0].total},this.failure)},indexMethod:function(e){return this.startRow+e},add:function(){this.clearValidate("ruleForm"),this.dialogVisible=!0,this.toTop=!1,this.if_disabled=!1,this.sort_disabled=!1,this.sort="",this.ruleForm={id:"",type_name:"",type_desc:"",ordinal:"",state:1}},look:function(e){var t=this;this.clearValidate("ruleForm"),this.if_disabled=!0,this.sort_disabled=!0,this.$request.get(this.$interface.MANAGE_REPORT_TYPE,{header:{token:this.token},id:e},function(e){for(var a in t.ruleForm)e.data[0].hasOwnProperty(a)&&(t.ruleForm[a]=e.data[0][a]);-1==t.ruleForm.ordinal?t.toTop=!0:t.sort=t.ruleForm.ordinal,t.dialogVisible=!0},this.failure)},save:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=c()({},{header:{token:t.token}},t.ruleForm);t.$request.post(t.$interface.MANAGE_REPORT_TYPE,a,function(e){t.dialogVisible=!1,t.getList(),t.$message({type:"success",message:"添加类别成功"})},function(e){t.dialogVisible=!1,t.$message({type:"error",message:e.result_msg})})})}}},Ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"shouhou panel"},[a("h1",[e._v("\n    类别管理\n    "),a("span",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.add()}}},[e._v("添加类别")])],1),e._v(" "),a("el-dialog",{attrs:{title:e.ruleForm.id?"查看":"添加",visible:e.dialogVisible,width:"700px","modal-append-to-body":!0,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm popup-cont",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"类别名称",prop:"type_name"}},[a("el-input",{attrs:{placeholder:"请输入类别名称",disabled:e.if_disabled},model:{value:e.ruleForm.type_name,callback:function(t){e.$set(e.ruleForm,"type_name",t)},expression:"ruleForm.type_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类别描述",prop:"type_desc"}},[a("el-input",{attrs:{placeholder:"请输入类别描述",type:"textarea",disabled:e.if_disabled},model:{value:e.ruleForm.type_desc,callback:function(t){e.$set(e.ruleForm,"type_desc",t)},expression:"ruleForm.type_desc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"desc"}},[a("el-checkbox",{attrs:{disabled:e.if_disabled},model:{value:e.toTop,callback:function(t){e.toTop=t},expression:"toTop"}},[e._v("置顶")])],1),e._v(" "),a("el-form-item",{attrs:{label:"排序编号",prop:"id"}},[a("el-input",{attrs:{placeholder:"请输入排序编号",type:"number",disabled:e.sort_disabled},model:{value:e.sort,callback:function(t){e.sort=t},expression:"sort"}})],1),e._v(" "),a("el-form-item",[a("el-radio-group",{attrs:{disabled:e.if_disabled},model:{value:e.ruleForm.state,callback:function(t){e.$set(e.ruleForm,"state",t)},expression:"ruleForm.state"}},[a("el-radio",{attrs:{label:1}},[e._v("所有客户可见")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("指定客户可见")]),e._v(" "),a("el-radio",{attrs:{label:3}},[e._v("隐藏")]),e._v(" "),a("el-radio",{attrs:{label:4}},[e._v("删除")])],1)],1),e._v(" "),e.if_disabled?a("div",{staticClass:"popup-btn"},[a("el-button",{attrs:{type:"",size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("关闭")])],1):a("div",{staticClass:"popup-btn"},[e.ruleForm.id?a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleForm.id,expression:"ruleForm.id"}],attrs:{type:"hidden",name:"id"},domProps:{value:e.ruleForm.id},on:{input:function(t){t.target.composing||e.$set(e.ruleForm,"id",t.target.value)}}}):e._e(),e._v(" "),a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){e.save("ruleForm")}}},[e._v("保存数据")]),e._v(" "),a("el-button",{attrs:{type:"",size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消编辑")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"result"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:"序号",type:"index",index:e.indexMethod,width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"类别ID",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type_name",width:"100px",label:"类别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type_desc",label:"描述","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{width:"180px",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("em",{class:[3==t.row.state?"font-ban":"font-allow"]},[e._v(e._s(e.status[t.row.state]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.look(t.row.id)}}},[e._v("查看")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination-box"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","prev-text":"上一页","next-text":"下一页","current-page":e.page,"page-size":e.rows,total:e.total},on:{"current-change":e.getList,"update:currentPage":function(t){e.page=t}}})],1)])},staticRenderFns:[]};var De=a("Z0/y")(Te,Ie,!1,function(e){a("4hQg")},"data-v-0c3af8d0",null).exports,Le={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"panel"},[t("h1",[this._v("下载记录")])])}]};var Oe=a("Z0/y")(null,Le,!1,function(e){a("6Xst")},"data-v-3fdac105",null).exports;s.default.use(l.a);var Ne=new l.a({mode:"hash",routes:[{path:"/",component:f,name:"index",children:[{path:"index/main",component:x},{path:"system",redirect:"account"},{path:"account",redirect:"group"},{path:"group/index",component:L},{path:"group",component:L},{path:"role/index",component:z},{path:"role",component:z},{path:"user/index",component:q},{path:"user",component:q},{path:"log/index",component:M},{path:"log",component:M},{path:"menu/index",component:H},{path:"menu",component:H},{path:"node/index",component:W},{path:"node",component:W},{path:"allot",component:le},{path:"article",component:ie},{path:"article/index",component:ie},{path:"article_category/index",component:ue},{path:"message",redirect:"message/index"},{path:"message/index",component:pe},{path:"message/list",component:_e},{path:"feedback",redirect:"feedback/index"},{path:"feedback/index",component:fe},{path:"feedback/list",component:be},{path:"feedback/detail",component:ke},{path:"shouhou/index",component:Fe},{path:"shouhou/upload",component:Ce},{path:"shouhou/view",component:je},{path:"shouhou/category",component:De},{path:"shouhou/download",component:Oe}]},{path:"/login",name:"login",component:g},{path:"/logout",name:"logout"},{path:"*",redirect:"index/main"}]}),ze={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"admin"}},[t("router-view")],1)},staticRenderFns:[]};var Ve=a("Z0/y")({name:"admin",data:function(){return{msg:"I am admin"}}},ze,!1,function(e){a("1v1R")},null,null).exports,Ae=a("IcnI"),qe=a("xUsN"),Pe=a.n(qe),Ue=a("ljGe"),Me=a("WocE");a("4wE5"),a("qCf3"),a("NuO4");s.default.prototype.$helper=Ue.a,s.default.prototype.$request=Me.a,s.default.prototype.$interface={CHECK_LOGIN:"/ajax/auth/checklogin",CHECK_LOGOUT:"/ajax/auth/checklogout",INDEX:"/ajax/index/index",REFRESH:"/ajax/auth/refresh",GROUP_LIST:"/ajax/group/index",GROUP_ADD:"/ajax/group/add",GROUP_EDIT:"/ajax/group/edit",GROUP_DEL:"/ajax/group/del",ROLE_LIST:"/ajax/role/index",ROLE_ADD:"/ajax/role/add",ROLE_EDIT:"/ajax/role/edit",ROLE_DEL:"/ajax/role/del",ROLE_ROLES:"/ajax/role/roles",USER:"/ajax/user",USER_LIST:"/ajax/user/index",USER_ADD:"/ajax/user/add",USER_EDIT:"/ajax/user/edit",USER_DEL:"/ajax/user/del",USER_USERS:"/ajax/user/users",LOG:"/ajax/log",LOG_LIST:"/ajax/log/index",ALLOT_APPLY:"/ajax/allot/apply",ALLOT_RESOURCE:"/ajax/allot/resource",GET_NEWS_BASE_INFO:"news/news/get_base_info",MODULE_LIST:"/ajax/module/index",MODULE_ADD:"/ajax/module/add",MODULE_EDIT:"/ajax/module/edit",MODULE_DEL:"/ajax/module/del",PRIV_LIST:"/ajax/node/index",PRIV_ADD:"/ajax/node/add",PRIV_EDIT:"/ajax/node/edit",PRIV_DEL:"/ajax/node/del",GET_REGION:"/ajax/allot/region",GET_COMMON_MANFS_BRANDS:"/after-sales-manage/common/manfs-brands",GET_BODYTYPE_MODEL_VERSION:"/after-sales-manage/common/bodytype-model-version",GET_FILE_REPORT_LIST:"/after-sales/report/report-list",UPLOAD_FILE:"/after-sales-manage/file",MANAGE_REPORT:"/after-sales-manage/report",REPORT_TYPES:"/after-sales/report/types",MANAGE_REPORT_TYPE:"/after-sales-manage/report-type"},s.default.use(Pe.a),s.default.config.productionTip=!1,Ne.beforeEach(function(e,t,a){var s=e.meta,l=e.path,r=s.auth,n=void 0===r||r,i=Boolean(Ae.a.state.admin.user_id);if(n&&!i&&"/login"!==l)return a({path:"/login"});a()}),new s.default({el:"#admin",store:Ae.a,router:Ne,template:"<Admin/>",components:{Admin:Ve}})},AWEM:function(e,t){},Abst:function(e,t){},"AgZ+":function(e,t){},IcnI:function(e,t,a){"use strict";var s=a("MVMM"),l=a("9rMa"),r=a("wMq3"),n=a("M8t8"),i=a("V6bs"),o=a.n(i);s.default.use(l.a),s.default.use(o.a),t.a=new l.a.Store({strict:!1,modules:{user:r.e,admin:n.e}})},JBPd:function(e,t){},M8t8:function(e,t,a){"use strict";a.d(t,"c",function(){return _}),a.d(t,"d",function(){return v}),a.d(t,"a",function(){return f}),a.d(t,"b",function(){return h});var s,l,r=a("ZLEe"),n=a.n(r),i=a("aA9S"),o=a.n(i),u=a("3cXf"),c=a.n(u),d=a("a3Yh"),p=a.n(d),m=a("MVMM"),_="ADMIN_SIGNIN",v="ADMIN_SIGNOUT",f="ADMIN_MENUS",h="ADMIN_REFRESH_TOKEN";t.e={strict:!1,state:function(){return JSON.parse(sessionStorage.getItem("admin"))||{}},actions:(s={},p()(s,_,function(e,t){(0,e.commit)(_,t)}),p()(s,v,function(e){(0,e.commit)(v)}),p()(s,f,function(e,t){(0,e.commit)(f,t)}),p()(s,h,function(e,t){(0,e.commit)(h,t)}),s),mutations:(l={},p()(l,_,function(e,t){sessionStorage.setItem("admin",c()(t)),o()(e,t)}),p()(l,v,function(e){sessionStorage.removeItem("admin"),n()(e).forEach(function(t){return m.default.delete(e,t)})}),p()(l,f,function(e,t){var a=JSON.parse(sessionStorage.getItem("admin"));a.menus=t,sessionStorage.setItem("admin",c()(a)),o()(e,a)}),p()(l,h,function(e,t){var a=JSON.parse(sessionStorage.getItem("admin"));a.token=t,sessionStorage.setItem("admin",c()(a)),o()(e,a)}),l)}},Njgu:function(e,t){},NuO4:function(e,t){},QBHe:function(e,t){},WnSl:function(e,t){},WocE:function(e,t,a){"use strict";var s=a("3cXf"),l=a.n(s),r=a("2sCs");function n(e,t,a,s,n){var i={token:""},o="";if("GET"===(e=e.toUpperCase())&&a||"POST"==e&&a||"PUT"==e&&a){a&&a.header&&(i=a.header,delete a.header),a&&a.responseType&&(o=a.responseType,delete a.responseType);var u=t.indexOf("?");"GET"===e&&(t=(-1==u?t:t.substr(0,u))+"?"+function(e){var t="";for(var a in e){var s=encodeURIComponent(e[a]);""!=s&&void 0!=s&&(t+="&"+a+"="+s)}return t.substr(1)}(a))}if(t){var c=t.indexOf("/ajax")>-1?"/":"/api";a="application/x-www-form-urlencoded"==i.ContentType?function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}(a):a,r({method:e,url:t,data:"POST"===e||"PUT"===e?a:null,headers:i||null,responseType:o||"json",baseURL:c}).then(function(e){e.data.result_code&&0==(e.data.result_code+"").indexOf("2")||200==e.data.code?"function"==typeof s&&s(e.data):"blob"==o?"function"==typeof s&&s(e):"function"==typeof n?n(e.data):window.alert("ERROR:"+l()(e.data))}).catch(function(e){e&&window.alert("API ERROR:"+e)})}else alert("请求地址为空")}t.a={get:function(e,t,a,s){return n("GET",e,t,a,s)},post:function(e,t,a,s){return n("POST",e,t,a,s)},put:function(e,t,a,s){return n("PUT",e,t,a,s)},delete:function(e,t,a,s){return n("DELETE",e,t,a,s)}}},ZWNW:function(e,t){},cEs2:function(e,t){},deHP:function(e,t){},"dx/k":function(e,t){},edhX:function(e,t){},fLel:function(e,t){},gORJ:function(e,t){},hfto:function(e,t){},is0X:function(e,t){},lUBD:function(e,t){},ljGe:function(e,t,a){"use strict";var s=a("aA9S"),l=a.n(s),r=a("hRKE"),n=a.n(r);function i(e){var t,a=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(a))?unescape(t[2]):null}var o=function(){this.version="1.0"};o.prototype.getUri=function(e){return-1!==(e=(-1!==(e=e||window.location.href).indexOf(window.location.host)?e.split(window.location.host)[1]:e).split("?")[0]).indexOf("#")?e.split("#")[1]:e},o.prototype.getNode=function(e,t){var a=e.map(function(e){if(e.url.indexOf(t)>=0)return e}).filter(function(e){return void 0!=e});if(a.length>0)return a[0].path?"m"+a[0].path:"";var s=location.href.replace(/.*spm=([\d\-m]+).*/gi,"$1");return/^m\-/.test(s)?s:""},t.a={setCookie:function(e,t,a){var s=new Date;s.setTime(s.getTime()+1e3*a);var l="expires="+s.toUTCString();document.cookie=e+"="+t+"; "+l},getCookie:i,delCookie:function(e){var t=new Date;t.setTime(t.getTime()-1);var a=i(e);null!=a&&(document.cookie=e+"="+a+";expires="+t.toGMTString())},inArray:function(e,t){if("string"!=typeof e&&"number"!=typeof e||"object"!=(void 0===t?"undefined":n()(t)))return-1;for(var a in t)if(t[a]==e)return a;return-1},findInArray:function e(t,a,s){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"sub",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if("string"!=typeof t||!a||"object"!=(void 0===s?"undefined":n()(s)))return{};for(var i in s){var o=s[i];o[t]&&o[t]==a?r.push(o):o.hasOwnProperty(l)&&"object"==n()(o[l])&&e(t,a,o[l],l,r)}return r.length>0?r[0]:{}},recurse:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"_sub_",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[{},{}],n={},i=1;return t.map(function(t){i=t.path.split("-").length,void 0==r[i]&&(r[i]={}),t[a]&&t.hasOwnProperty(s)&&(n[t[a]]=[],r[i]=l()({},r[i],n),e(t[s],a,s,r))}),r},arr2table:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pid",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"sub",l=[];for(var r in e){var n={},i=[];for(var o in e[r])o==s?i=e[r][s]:n[o]=e[r][o];if(l.push(n),i){var u=this.arr2table(i,t,a,s);l=l.concat(u)}}return l},queryEncoded:function(e){var t="";for(var a in e){var s=encodeURIComponent(e[a]);""!=s&&void 0!=s&&(t+="&"+a+"="+s)}return t.substr(1)},menu:new o}},ocrw:function(e,t){},q2Q2:function(e,t){},qCf3:function(e,t){},rAap:function(e,t){},v5l7:function(e,t){},wMq3:function(e,t,a){"use strict";a.d(t,"c",function(){return _}),a.d(t,"d",function(){return v}),a.d(t,"a",function(){return f}),a.d(t,"b",function(){return h});var s,l,r=a("a3Yh"),n=a.n(r),i=a("ZLEe"),o=a.n(i),u=a("aA9S"),c=a.n(u),d=a("3cXf"),p=a.n(d),m=a("MVMM"),_="USER_SIGNIN",v="USER_SIGNOUT",f="USER_MENUS",h="USER_REFRESH_TOKEN";t.e={state:function(){var e=JSON.parse(m.default.cookies.get("user"))||{};return e.menus=JSON.parse(localStorage.getItem("menus"))||[],e.menus&&0!=e.menus.length?e:(m.default.cookies.remove("user"),{})},mutations:(s={},n()(s,_,function(e,t){localStorage.removeItem("iways_uuid"),m.default.cookies.set("user",p()(t),43200,"/"),c()(e,t)}),n()(s,v,function(e){m.default.cookies.remove("user"),o()(e).forEach(function(t){return m.default.delete(e,t)})}),n()(s,f,function(e,t){localStorage.setItem("menus",p()(t))}),n()(s,h,function(e,t){var a=JSON.parse(m.default.cookies.get("user"))||{};a.token=t,m.default.cookies.set("user",p()(a),43200,"/"),c()(e,a)}),s),actions:(l={},n()(l,_,function(e,t){(0,e.commit)(_,t)}),n()(l,v,function(e){(0,e.commit)(v)}),n()(l,h,function(e,t){(0,e.commit)(h,t)}),n()(l,f,function(e,t){(0,e.commit)(f,t)}),l)}},z7i6:function(e,t){}},["APar"]);
//# sourceMappingURL=admin.b8944379d15572b87b60.js.map